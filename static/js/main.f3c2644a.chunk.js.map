{"version":3,"sources":["components/burger-ingredients/burger-ingredients.module.css","components/modal-overlay/modal-overlay.module.css","components/feed-burgers/feed-burgers.module.css","services/types/hooks-types.ts","components/protected-route/protected-route.tsx","components/app-header/components/header-button.tsx","components/app-header/app-header.tsx","utils/helpers.ts","utils/api.ts","utils/data.ts","services/slicers/foods/foods.ts","components/burger-ingredients/components/ingredients-menu.tsx","components/burger-ingredients/components/ingredient-card.tsx","components/burger-ingredients/components/ingredients-sections.tsx","components/scrollbox/scrollbox.tsx","components/burger-ingredients/burger-ingredients.tsx","components/moved-element/moved-element.tsx","services/slicers/burger-constructor/burger-constructor.ts","components/burger-constructor/components/constructor-filling.tsx","services/slicers/orders/orders.ts","components/burger-constructor/components/constructor-confirm.tsx","components/burger-constructor/components/constructor-menu.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/icon-done.png","components/order-details/order-loader-number.jsx","components/loader/loader.tsx","components/error-message/error-message.tsx","components/order-details/order-details.tsx","components/burger-constructor/burger-constructor.tsx","pages/burger/burger-constructor.tsx","components/auth-form/auth-form-footer.tsx","components/auth-form/auth-form.tsx","services/slicers/profile/profile.ts","pages/auth/login.tsx","pages/auth/register.tsx","pages/auth/forgot-password.tsx","pages/auth/reset-password.tsx","pages/nopage/nopage.tsx","components/ingredient-details/ingredient-desc.tsx","components/ingredient-details/ingredients-details.tsx","pages/ingredient/ingredient.tsx","components/burger-card/burger-card.tsx","components/feed-burgers/feed-burgers.tsx","pages/profile/profile.tsx","components/feed-status/feed-status.tsx","pages/feed/feed.tsx","components/burger-order/burger-order.tsx","pages/burger-order/burger-order.tsx","components/app/app.tsx","components/error-boundary/error-boundary.tsx","reportWebVitals.ts","services/slicers/ingredient/ingredient.ts","services/slicers/header/header.ts","services/slicers/auth-form/auth-form.ts","services/slicers/burger-order/burger-order.ts","services/slicers/ws-feed/ws-feed.ts","services/slicers/ws-orders/ws-orders.ts","services/index.ts","services/middleware/socketMidlware.ts","index.tsx","pages/pages.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-card/burger-card.module.css","components/ingredient-details/ingredients-details.module.css","components/feed-status/feed-status.module.css","components/burger-order/burger-order.module.css","components/app-header/app-header.module.css","components/auth-form/form.module.css","pages/profile/profile.module.css","components/order-details/order-details.module.css","components/scrollbox/scrollbox.module.css","components/modal/modal.module.css","components/loader/loader.module.css","components/error-message/error-message.module.css","components/app/app.module.css"],"names":["module","exports","useSelector","selectorHook","useDispatch","dispatchHook","ProtectedRoute","children","rest","isAuth","store","profile","user","render","location","to","pathname","state","from","HeaderButton","React","memo","data","icon","text","link","type","ButtonIcon","burger","BurgerIcon","list","ListIcon","ProfileIcon","className","headerStyles","AppHeader","headerLinks","header","dispatch","useLocation","useEffect","maxMatchLength","activeKey","key","includes","length","payload","content","menu","orders","logo","randomInteger","min","max","Math","floor","random","getBurgerByRecipe","recipe","bun","find","food","filling","filter","map","f","i","unicId","_id","totalPrice","reduce","total","current","price","concat","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","getFullOrders","foods","order","ingredients","ingredient","baseUrl","apiHandler","res","ok","json","Promise","reject","status","updateToken","refreshToken","localStorage","getItem","fetch","method","headers","body","JSON","stringify","token","then","setItem","accessToken","split","translations","main","sauce","foodsSlice","createSlice","initialState","items","sections","isLoading","isError","isLoaded","reducers","foodsLoading","foodsError","foodsSuccess","action","forEach","foodIndex","findIndex","s","id","push","count","active","getSections","clearCounts","section","setCounts","recipeItem","setActiveSection","actions","reducer","getFoods","result","catch","e","console","log","updateCounts","getState","IngredientsMenu","iStyles","navigation","href","navLinkActive","navLink","onClick","IngredientCard","useDrag","item","dragRef","background","card","cardImage","src","image","alt","ref","cardText","cardPrice","style","lineHeight","cardTitle","size","IngredientsSections","lastSectionRef","useRef","sectionHeight","offsetHeight","boxHeight","ingredientsElem","closest","clientHeight","paddingBottom","sectionFood","cards","ScrollBox","useState","curBlockId","setCurBlockId","containerRef","contentRef","scrollContainerRef","scrollbarRef","container","scrollContainer","scrollbar","bottom","String","top","height","scrollHeight","setScroll","visibility","scrollTop","arrBlocksId","getActiveSectionId","addEventListener","start","preventDefault","scrollBehavior","y","offsetTop","moveContent","end","diff","pageY","relativeScrollTop","removeListeners","removeEventListener","callbackScroll","useCallback","curId","containerTop","getBoundingClientRect","containerBottom","maxRelativeHeight","querySelector","sectionTop","sectionBottom","offTop","offBottom","viewRelativeHeight","sboxStyles","scrollBarContainer","BurgerIngredients","updateMenu","prevActive","m","MovedElement","index","moveElement","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","getClientOffset","drop","isDragging","opacity","drag","padding","margin","backgroundColor","cursor","initialBurger","burgerSlice","clear","foodsArr","createRandomRecipe","del","recipeAfterDel","add","newFood","addRecipe","splice","sort","addInRecipe","a","Filling","dragCard","update","$splice","cStyles","thumbnail","handleClose","ordersSlice","openDetails","currentNumber","closeDetails","orderLoading","orderError","orderSuccess","number","getOrderNumber","arrId","arrIngredients","ConfirmOrder","history","useHistory","svgIcon","priceSize","getComputedStyle","fontSize","setAttribute","resizeCurrencyIcon","confirmOrder","ing","confirm","orderPrice","ConstructorMenu","ModalOverlay","oStyles","overlay","onClose","modalRoot","getElementById","Modal","title","closeByKey","ReactDOM","createPortal","mStyles","modalBox","stopPropagation","closePosition","LoaderNumber","randomNumber","setNumber","timerNumber","setInterval","clearInterval","titleLoader","Loader","icons","lStyles","sin","PI","left","cos","ErrorMessage","textArr","errorArr","eStyles","OrderDetails","iconDonePath","BurgerConstructor","onDropHandler","isOver","canDrop","dropTarget","dropContainer","isLocked","isDrag","overflow","BurgerConstructorPage","DndProvider","backend","HTML5Backend","pStyles","AuthFormFooter","footerLinks","fStyles","footer","footerBlock","footerDesc","desc","footerLink","AuthForm","arrInputs","inputs","authForm","form","onSubmit","event","callback","confirmForm","input","placeholder","onChange","target","onIconClick","initialProfile","email","canRestorePass","password","profileIsLoading","porfileIsLoaded","profileIsError","profileSlice","profileLoading","profileSuccess","setProfile","clearProfile","onChangeInput","toggleRestorePass","getUserProfile","getUser","err","loginUser","login","newUser","batch","registerUser","register","logoutUser","logout","removeItem","updateUserProfile","updateUser","resetPass","checkEmail","restorePass","dataInputs","setNewPass","LoginPage","RegisterPage","ForgotPassPage","ResetPassPage","NoPage","noPage","NoOrderPage","noOrderPage","NoOrdersPage","IngredientDescription","dStyles","image_large","composition","composeItem","calories","proteins","fat","carbohydrates","IngredientsDetails","IngredientPageModal","position","show","IngredientPage","useParams","setIngredient","ingred","modalPage","BurgerCard","createdAt","bStyles","cardHeader","time","cardFooter","images","CardFoods","bigBurger","reverse","cardImages","BurgerTime","color","burgerDate","burgerDay","getDate","burgerMonth","getMonth","burgerYear","getFullYear","curDay","prevMonthDays","diffDays","timeLabel","zoneLabel","toTimeString","substring","replaceAll","getHours","getMinutes","curTime","BurgerIngredientImage","imageContainer","marginRight","cardImageBlur","backgroundImage","zIndex","BurgerPrice","cardTotal","BurgerNumber","FeedBurgers","burgers","ProfilePage","path","useRouteMatch","exact","ProfileMenu","url","classLink","classActiveLink","activeLink","activeClassName","ProfileForm","changeProfile","formSubmit","ProfileOrders","wsOrders","success","isLoadedFoods","FeedStatus","wsFeed","totalToday","arrDone","arrNotReady","setState","b","StatusColumns","arr","StatusCount","columns","digits","formatter","Intl","NumberFormat","totalDigits","format","FeedPage","BurgerOrder","BurgerOrderRecipe","OrderIngredient","about","BurgerOrderModal","burgerOrder","goBack","BurgerOrderPage","profileOrders","App","toLowerCase","styles","ErrorBoundary","hasError","error","errorInfo","this","_","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredietnSlice","openIngredient","closeIngredient","headerSlice","onChangeLink","initialAuth","authSlice","setInputs","valid","clearForm","handleInput","handleIcon","inputState","burgerOrderSlice","openOrder","closeOrder","wsError","wsSuccess","wsClosed","wsGetFeed","parsedData","wsGetOrders","rootReducer","combineReducers","foodsReducer","burgerReducer","ordersReducer","ingredientReducer","headerReducer","profileReducer","authFormReducer","burgerOrderReducer","wsFeedReducer","wsOrdersReducer","socketMiddleware","wsUrl","wsActions","isToken","socket","next","wsInit","onOpen","onError","onMessage","WebSocket","onopen","onerror","onmessage","parse","onclose","wsActionsFeed","wsActionsOrders","configureStore","middleware","getDefaultMiddleware","logger","devTools","process","StrictMode","basename"],"mappings":"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","file":"static/js/main.f3c2644a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__3ElkJ\",\"menu\":\"burger-ingredients_menu__1AGSy\",\"navigation\":\"burger-ingredients_navigation__2fOQ5\",\"navLink\":\"burger-ingredients_navLink__EFZ70\",\"navLinkActive\":\"burger-ingredients_navLinkActive__1Jxpi burger-ingredients_navLink__EFZ70\",\"sections\":\"burger-ingredients_sections__WEVwA\",\"sectionFood\":\"burger-ingredients_sectionFood__2yBV9\",\"cards\":\"burger-ingredients_cards__1_ztt\",\"card\":\"burger-ingredients_card__2orry\",\"cardPrice\":\"burger-ingredients_cardPrice__1i_8M\",\"cardTitle\":\"burger-ingredients_cardTitle__3obuH\",\"count\":\"burger-ingredients_count__3NHUR\",\"cardText\":\"burger-ingredients_cardText__2go2e\",\"cardImage\":\"burger-ingredients_cardImage__1pVfE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__21jg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgers\":\"feed-burgers_burgers__KapyN\",\"cards\":\"feed-burgers_cards__xs5Q_\"};","import {\r\n    TypedUseSelectorHook,\r\n    useSelector as selectorHook,\r\n    useDispatch as dispatchHook,\r\n} from 'react-redux';\r\nimport { AppDispatch, AppThunk, RootState } from './store-types';\r\n\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();","import React, {FC} from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector } from '../../services/types/hooks-types';\r\n\r\nexport const ProtectedRoute:FC<{path? : string, exact?: boolean}> = ({ children, ...rest }) => {\r\n    const isAuth = useSelector(store => store.profile.user.isAuth);\r\n    \r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) =>\r\n                isAuth\r\n                    ? (children)\r\n                    : (<Redirect to={{\r\n                        pathname: '/login',\r\n                        state: { from: location }\r\n                    }}/>)\r\n            }\r\n        />\r\n    )\r\n}\r\n","import React, {FC} from 'react';\r\nimport headerStyles from '../app-header.module.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { IheaderButtonProps } from '../../../utils/proptypes';\r\nimport { BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const HeaderButton: FC<IheaderButtonProps> = React.memo(\r\n    ({ data }) => {\r\n        // HeaderButton.propTypes = headerButtonProptypes;\r\n\r\n        const { icon, text, link, type } = data;\r\n        const icons = {\r\n            burger: BurgerIcon,\r\n            list: ListIcon,\r\n            profile: ProfileIcon\r\n        };\r\n        const ButtonIcon = icons[icon];\r\n\r\n\r\n        return (\r\n            <Link to={link}>\r\n                <button className={headerStyles[\"button-\" + type]}>\r\n                    <ButtonIcon type={type} />\r\n                    <p className=\"text text_type_main-small pl-1\">{text}</p>\r\n                </button>\r\n            </Link>\r\n        )\r\n    }\r\n)\r\n\r\n","import React, { useEffect, FC } from 'react';\r\nimport { THeaderState } from '../../services/slicers/header/header-types';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport headerStyles from './app-header.module.css';\r\nimport { Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { HeaderButton } from './components/header-button';\r\n\r\nexport const AppHeader: FC = React.memo(\r\n    () => {\r\n        const headerLinks = useSelector(store => store.header);\r\n        const dispatch = useDispatch();\r\n        const { pathname } = useLocation();\r\n\r\n        useEffect(() => {\r\n            let maxMatchLength = 0;\r\n            let activeKey = \"\";\r\n\r\n            for (const key in headerLinks) {\r\n                const link = headerLinks[key as keyof THeaderState].link\r\n\r\n                if (pathname.includes(link) && link.length > maxMatchLength) {\r\n                    activeKey = key;\r\n                    maxMatchLength = link.length;\r\n                }\r\n                if (link === \"/\" && pathname !== \"/\") {\r\n                    activeKey = \"\";\r\n                }\r\n            };\r\n            dispatch({ type: \"header/onChangeLink\", payload: activeKey })\r\n        }, [pathname]);\r\n\r\n        return (\r\n            <header className={headerStyles.header}>\r\n                <nav className={headerStyles.content + \" pt-4 pb-4\"}>\r\n                    <div className={headerStyles.menu}>\r\n                        <HeaderButton data={headerLinks.burger} />\r\n                        <HeaderButton data={headerLinks.orders} />\r\n                    </div>\r\n                    <HeaderButton data={headerLinks.profile} />\r\n                    <div className={headerStyles.logo}>\r\n                        <Link to={\"/\"}>\r\n                            <Logo />\r\n                        </Link>\r\n                    </div>\r\n                </nav>\r\n            </header>)\r\n    }\r\n)\r\n","import { updateToken } from \"./api\";\r\nimport { Tfood, Torder, Tburger, Tfoods } from \"./proptypes\";\r\n\r\nexport const randomInteger = (min: number, max: number): number => Math.floor(min + Math.random() * (max + 1 - min));\r\n\r\n//------------------------burger reducer---------------------------------\r\nexport const createRandomRecipe = (foodsArr: Array<Tfood>): Array<Tfood> => {\r\n    const recipe: Array<Tfood> = [];\r\n    const count = randomInteger(6, 10);\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        recipe[i] = foodsArr[randomInteger(0, foodsArr.length - 1)];\r\n    }\r\n\r\n    if (!!!recipe.find(f => f.type === \"bun\")) {\r\n        const bun: Tfood | undefined = foodsArr.find(f => f.type === \"bun\");\r\n        if (typeof bun !== 'undefined') {\r\n            recipe.push(bun)\r\n        }\r\n    }\r\n    return recipe\r\n}\r\n\r\nexport function getBurgerByRecipe(recipe: Array<Tfood>): {\r\n    recipe: Array<Tfood>,\r\n    bun: Tfood | undefined | null,\r\n    filling: Array<Tfood>,\r\n    totalPrice: number | null\r\n} {\r\n    const bun: Tfood | undefined = recipe.find(food => food.type === \"bun\");\r\n    const filling: Array<Tfood> = recipe.filter(food => food.type !== \"bun\").map((f, i) => ({ ...f, unicId: i + f._id }));\r\n    const totalPrice: number = filling.reduce((total, current) => total + current.price, 0)\r\n        + (!!bun ? bun.price * 2 : 0);\r\n    recipe = filling.concat(!!bun ? bun : []);\r\n    return { recipe, bun, filling, totalPrice }\r\n}\r\n\r\n//------------------------------cookie------------------------------------\r\nexport function getCookie(name: string): string | undefined {\r\n    const matches = document.cookie.match(\r\n        new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n    );\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function setCookie(\r\n    name: string,\r\n    value: string | number | boolean | null,\r\n    props?: any): void {\r\n    props = props || {};\r\n    let exp = props.expires;\r\n    if (typeof exp == 'number' && exp) {\r\n        const d = new Date();\r\n        d.setTime(d.getTime() + exp * 1000);\r\n        exp = props.expires = d;\r\n    }\r\n    if (exp && exp.toUTCString) {\r\n        props.expires = exp.toUTCString();\r\n    }\r\n    value = encodeURIComponent(value !==null ? value : '');\r\n    let updatedCookie = name + '=' + value;\r\n    for (const propName in props) {\r\n        updatedCookie += '; ' + propName;\r\n        const propValue = props[propName];\r\n        if (propValue !== true) {\r\n            updatedCookie += '=' + propValue;\r\n        }\r\n    }\r\n    document.cookie = updatedCookie;\r\n}\r\n\r\n//---------------------------------auth--------------------------------------------------\r\n\r\nexport async function isTokenValid(): Promise<boolean> {\r\n    let isAuth = false;\r\n    const token = localStorage.getItem('refreshToken');\r\n\r\n    if (!!token && token !== 'undefined') {\r\n        await updateToken()\r\n            .then(() => isAuth = true)\r\n            .catch(err => {\r\n                console.log(\"Error with toekn update:\", err);\r\n                isAuth = false;\r\n            })\r\n    }\r\n    return isAuth\r\n}\r\n\r\n//--------------------------orders-with-full-ingredients----------------------------------\r\nexport function getFullOrders(orders: Torder[], foods: Tfoods) {\r\n    const fullOrders = orders.map((order: Torder) => ({\r\n        ...order,\r\n        ingredients: order.ingredients.map(ingredient =>\r\n            foods.find(food => ingredient === food._id))\r\n            .filter(ingredient => !!ingredient)\r\n    }));\r\n\r\n    return fullOrders\r\n}\r\n","import { getCookie, setCookie } from \"./helpers\";\r\nimport { Idata } from \"./proptypes\";\r\n\r\nexport const baseUrl = 'https://norma.nomoreparties.space/api';\r\nconst apiHandler = (res: any) => res.ok ? res.json() : Promise.reject(`Ошибка ${res.status}`);\r\n\r\n\r\nexport const loadFoods = () =>\r\n    fetch(`${baseUrl}/ingredients`)\r\n        .then(res => apiHandler(res));\r\n\r\nexport const loadOrderNumber = (arrIngredients:Array<string>) =>\r\n    fetch(`${baseUrl}/orders`,\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n                'Authorization': 'Bearer ' + getCookie('accessToken')\r\n            },\r\n            body: JSON.stringify({ ingredients: arrIngredients })\r\n        })\r\n        .then(res => apiHandler(res));\r\n\r\n//-----------------------auth-------------------------------------\r\n\r\nexport const login = (data: Idata) =>\r\n    fetch(`${baseUrl}/auth/login`,\r\n        {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json;charset=utf-8' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => apiHandler(res));\r\n\r\nexport const register = (data: Idata) =>\r\n    fetch(`${baseUrl}/auth/register`,\r\n        {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json;charset=utf-8' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => apiHandler(res));\r\n\r\nexport const logout = () => {\r\n    const refreshToken = localStorage.getItem('refreshToken')!;\r\n\r\n    return fetch(`${baseUrl}/auth/logout`,\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n                'Authorization': refreshToken\r\n            },\r\n            body: JSON.stringify({ token: refreshToken })\r\n        })\r\n        .then(res => apiHandler(res));\r\n}\r\n\r\nexport const updateToken = () => {\r\n    const refreshToken = localStorage.getItem('refreshToken')!;\r\n\r\n    return fetch(`${baseUrl}/auth/token`,\r\n        {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n                'Authorization': refreshToken\r\n            },\r\n            body: JSON.stringify({ token: refreshToken })\r\n        })\r\n        .then(res => res.ok ? res.json() : Promise.reject(`Ошибка ${res.status}`))\r\n        .then(res => {\r\n            localStorage.setItem('refreshToken', res.refreshToken);\r\n            setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1]);\r\n            return res\r\n        })\r\n}\r\n\r\n\r\n//-----------------------user-------------------------------------------\r\nexport const getUser = () => {\r\n    const accessToken = getCookie('accessToken');\r\n\r\n    if (!!accessToken) {\r\n        return fetch(`${baseUrl}/auth/user`,\r\n            {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json;charset=utf-8',\r\n                    'Authorization': 'Bearer ' + accessToken\r\n                }\r\n            })\r\n            .then(res => apiHandler(res));\r\n    } else {\r\n        return Promise.reject(`Профиль не может быть получен: нет токена`)\r\n    }\r\n}\r\n\r\n\r\nexport const updateUser = (data: Idata) => {\r\n    fetch(`${baseUrl}/auth/user`,\r\n        {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n                'Authorization': 'Bearer ' + getCookie('accessToken')\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => apiHandler(res));\r\n}\r\n//-----------------------reset-pass-------------------------------------\r\n\r\nexport const checkEmail = (data: Idata) =>\r\n    fetch(`${baseUrl}/password-reset`,\r\n        {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json;charset=utf-8' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => apiHandler(res));\r\n\r\nexport const setNewPass = (data: Idata) =>\r\n    fetch(`${baseUrl}/password-reset/reset`,\r\n        {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json;charset=utf-8' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then(res => apiHandler(res));\r\n\r\n","import { Idata } from \"./proptypes\";\r\nexport const translations: Idata = {\r\n    bun: \"Булки\",\r\n    main: \"Начинка\",\r\n    sauce: \"Соусы\"\r\n};\r\n\r\n// export const customRecipe =\r\n//     [\r\n//     {\r\n//             \"_id\": \"60d3b41abdacab0026a733c6\",\r\n//             \"name\": \"Краторная булка N-200i\",\r\n//             \"type\": \"bun\",\r\n//             \"proteins\": 80,\r\n//             \"fat\": 24,\r\n//             \"carbohydrates\": 53,\r\n//             \"calories\": 420,\r\n//             \"price\": 1255,\r\n//             \"image\": \"https://code.s3.yandex.net/react/code/bun-02.png\",\r\n//             \"image_mobile\": \"https://code.s3.yandex.net/react/code/bun-02-mobile.png\",\r\n//             \"image_large\": \"https://code.s3.yandex.net/react/code/bun-02-large.png\",\r\n//             \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cc\",\r\n//         \"name\": \"Соус Spicy-X\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 30,\r\n//         \"fat\": 20,\r\n//         \"carbohydrates\": 40,\r\n//         \"calories\": 30,\r\n//         \"price\": 90,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-02.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-02-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-02-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d3\",\r\n//         \"name\": \"Мини-салат Экзо-Плантаго\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 1,\r\n//         \"fat\": 2,\r\n//         \"carbohydrates\": 3,\r\n//         \"calories\": 6,\r\n//         \"price\": 4400,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/salad.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/salad-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/salad-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cb\",\r\n//         \"name\": \"Биокотлета из марсианской Магнолии\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 420,\r\n//         \"fat\": 142,\r\n//         \"carbohydrates\": 242,\r\n//         \"calories\": 4242,\r\n//         \"price\": 424,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/meat-01.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/meat-01-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/meat-01-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d0\",\r\n//         \"name\": \"Хрустящие минеральные кольца\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 808,\r\n//         \"fat\": 689,\r\n//         \"carbohydrates\": 609,\r\n//         \"calories\": 986,\r\n//         \"price\": 300,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/mineral_rings.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/mineral_rings-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/mineral_rings-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d0\",\r\n//         \"name\": \"Хрустящие минеральные кольца\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 808,\r\n//         \"fat\": 689,\r\n//         \"carbohydrates\": 609,\r\n//         \"calories\": 986,\r\n//         \"price\": 300,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/mineral_rings.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/mineral_rings-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/mineral_rings-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d4\",\r\n//         \"name\": \"Сыр с астероидной плесенью\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 84,\r\n//         \"fat\": 48,\r\n//         \"carbohydrates\": 420,\r\n//         \"calories\": 3377,\r\n//         \"price\": 4142,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/cheese.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/cheese-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/cheese-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cd\",\r\n//         \"name\": \"Соус фирменный Space Sauce\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 50,\r\n//         \"fat\": 22,\r\n//         \"carbohydrates\": 11,\r\n//         \"calories\": 14,\r\n//         \"price\": 80,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-04.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-04-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-04-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d4\",\r\n//         \"name\": \"Сыр с астероидной плесенью\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 84,\r\n//         \"fat\": 48,\r\n//         \"carbohydrates\": 420,\r\n//         \"calories\": 3377,\r\n//         \"price\": 4142,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/cheese.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/cheese-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/cheese-large.png\",\r\n//         \"__v\": 0\r\n//     }\r\n// ];\r\n\r\n\r\n\r\n// export const realFoods =\r\n//     [\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733c6\",\r\n//         \"name\": \"Краторная булка N-200i\",\r\n//         \"type\": \"bun\",\r\n//         \"proteins\": 80,\r\n//         \"fat\": 24,\r\n//         \"carbohydrates\": 53,\r\n//         \"calories\": 420,\r\n//         \"price\": 1255,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/bun-02.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/bun-02-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/bun-02-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733c7\",\r\n//         \"name\": \"Флюоресцентная булка R2-D3\",\r\n//         \"type\": \"bun\",\r\n//         \"proteins\": 44,\r\n//         \"fat\": 26,\r\n//         \"carbohydrates\": 85,\r\n//         \"calories\": 643,\r\n//         \"price\": 988,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/bun-01.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/bun-01-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/bun-01-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733c8\",\r\n//         \"name\": \"Филе Люминесцентного тетраодонтимформа\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 44,\r\n//         \"fat\": 26,\r\n//         \"carbohydrates\": 85,\r\n//         \"calories\": 643,\r\n//         \"price\": 988,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/meat-03.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/meat-03-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/meat-03-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733c9\",\r\n//         \"name\": \"Мясо бессмертных моллюсков Protostomia\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 433,\r\n//         \"fat\": 244,\r\n//         \"carbohydrates\": 33,\r\n//         \"calories\": 420,\r\n//         \"price\": 1337,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/meat-02.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/meat-02-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/meat-02-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733ca\",\r\n//         \"name\": \"Говяжий метеорит (отбивная)\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 800,\r\n//         \"fat\": 800,\r\n//         \"carbohydrates\": 300,\r\n//         \"calories\": 2674,\r\n//         \"price\": 3000,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/meat-04.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/meat-04-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/meat-04-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cb\",\r\n//         \"name\": \"Биокотлета из марсианской Магнолии\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 420,\r\n//         \"fat\": 142,\r\n//         \"carbohydrates\": 242,\r\n//         \"calories\": 4242,\r\n//         \"price\": 424,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/meat-01.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/meat-01-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/meat-01-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cc\",\r\n//         \"name\": \"Соус Spicy-X\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 30,\r\n//         \"fat\": 20,\r\n//         \"carbohydrates\": 40,\r\n//         \"calories\": 30,\r\n//         \"price\": 90,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-02.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-02-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-02-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cd\",\r\n//         \"name\": \"Соус фирменный Space Sauce\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 50,\r\n//         \"fat\": 22,\r\n//         \"carbohydrates\": 11,\r\n//         \"calories\": 14,\r\n//         \"price\": 80,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-04.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-04-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-04-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733ce\",\r\n//         \"name\": \"Соус традиционный галактический\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 42,\r\n//         \"fat\": 24,\r\n//         \"carbohydrates\": 42,\r\n//         \"calories\": 99,\r\n//         \"price\": 15,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-03.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-03-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-03-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733cf\",\r\n//         \"name\": \"Соус с шипами Антарианского плоскоходца\",\r\n//         \"type\": \"sauce\",\r\n//         \"proteins\": 101,\r\n//         \"fat\": 99,\r\n//         \"carbohydrates\": 100,\r\n//         \"calories\": 100,\r\n//         \"price\": 88,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sauce-01.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sauce-01-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sauce-01-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d0\",\r\n//         \"name\": \"Хрустящие минеральные кольца\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 808,\r\n//         \"fat\": 689,\r\n//         \"carbohydrates\": 609,\r\n//         \"calories\": 986,\r\n//         \"price\": 300,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/mineral_rings.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/mineral_rings-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/mineral_rings-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d1\",\r\n//         \"name\": \"Плоды Фалленианского дерева\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 20,\r\n//         \"fat\": 5,\r\n//         \"carbohydrates\": 55,\r\n//         \"calories\": 77,\r\n//         \"price\": 874,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/sp_1.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/sp_1-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/sp_1-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d2\",\r\n//         \"name\": \"Кристаллы марсианских альфа-сахаридов\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 234,\r\n//         \"fat\": 432,\r\n//         \"carbohydrates\": 111,\r\n//         \"calories\": 189,\r\n//         \"price\": 762,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/core.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/core-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/core-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d3\",\r\n//         \"name\": \"Мини-салат Экзо-Плантаго\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 1,\r\n//         \"fat\": 2,\r\n//         \"carbohydrates\": 3,\r\n//         \"calories\": 6,\r\n//         \"price\": 4400,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/salad.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/salad-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/salad-large.png\",\r\n//         \"__v\": 0\r\n//     },\r\n//     {\r\n//         \"_id\": \"60d3b41abdacab0026a733d4\",\r\n//         \"name\": \"Сыр с астероидной плесенью\",\r\n//         \"type\": \"main\",\r\n//         \"proteins\": 84,\r\n//         \"fat\": 48,\r\n//         \"carbohydrates\": 420,\r\n//         \"calories\": 3377,\r\n//         \"price\": 4142,\r\n//         \"image\": \"https://code.s3.yandex.net/react/code/cheese.png\",\r\n//         \"image_mobile\": \"https://code.s3.yandex.net/react/code/cheese-mobile.png\",\r\n//         \"image_large\": \"https://code.s3.yandex.net/react/code/cheese-large.png\",\r\n//         \"__v\": 0\r\n//     }\r\n// ];\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { loadFoods } from '../../../utils/api';\r\nimport { translations } from '../../../utils/data';\r\nimport { TFoodsState } from './foods-types';\r\nimport { Tfood, TingredientSection } from '../../../utils/proptypes';\r\nimport { AppThunk, AppDispatch, GetState } from '../../types/store-types';\r\n\r\nconst initialFoods: TFoodsState = {\r\n    items: [],\r\n    sections: [],\r\n    \r\n    isLoading: false,\r\n    isError: false,\r\n    isLoaded: false\r\n};\r\n\r\nconst foodsSlice = createSlice({\r\n    name: 'foods',\r\n    initialState: initialFoods,\r\n    reducers: {\r\n        foodsLoading: (state) => {\r\n            state.isLoading = true;\r\n            state.isError = false;\r\n            state.isLoaded = false\r\n        },\r\n        foodsError: (state) => {\r\n            state.isLoading = false;\r\n            state.isError = true;\r\n            state.isLoaded = false\r\n        },\r\n        foodsSuccess: (state, action) => {\r\n            state.items = action.payload;\r\n            state.isLoading = false;\r\n            state.isError = false;\r\n            state.isLoaded = true\r\n            state.sections = getSections(action.payload);\r\n        },\r\n        clearCounts: (state) => {\r\n            state.sections.forEach(section => {\r\n                section.foods = section.foods.map(f =>\r\n                    ({ ...f, count: 0 }))\r\n            });\r\n        },\r\n        setCounts: (state, action) => {\r\n            state.sections.forEach(section =>\r\n                section.foods.forEach(f =>\r\n                    f.count = action.payload.reduce((total: number, recipeItem: Tfood) =>\r\n                        recipeItem._id === f._id\r\n                            ? total + (recipeItem.type !== 'bun' ? 1 : 2)\r\n                            : total, 0))\r\n            )\r\n        },\r\n        setActiveSection: (state, action) => {\r\n            state.sections = state.sections.map(s => ({ ...s, active: s.id === action.payload }))\r\n        }\r\n    },\r\n});\r\n\r\n\r\nconst { actions, reducer } = foodsSlice;\r\nconst {\r\n    foodsLoading, foodsError, foodsSuccess,\r\n    clearCounts, setCounts, setActiveSection\r\n} = actions;\r\n\r\nconst getFoods: AppThunk = () => {\r\n     return function (dispatch: AppDispatch) {\r\n        dispatch(foodsLoading());\r\n        return loadFoods()\r\n            .then(result => dispatch(foodsSuccess(result.data)))\r\n            .catch(e => {\r\n                console.log(\"Error with ingredients:\", e);\r\n                return dispatch(foodsError())\r\n            })\r\n    }\r\n};\r\n\r\nconst updateCounts: (dispatch: AppDispatch, getState: GetState) => void\r\n  = (dispatch, getState) => {\r\n    const curRecipe = getState().burger.recipe;\r\n    dispatch({ type: \"foods/setCounts\", payload: curRecipe })\r\n};\r\n\r\nfunction getSections(items: Array<Tfood>) {\r\n    const sections: Array<TingredientSection> = [];\r\n    items.forEach(food => {\r\n        const foodIndex = sections.findIndex(s => s.id === food.type);\r\n        foodIndex > -1\r\n            ? sections[foodIndex].foods.push({ ...food, count: 0 })\r\n            : sections.push({\r\n                id: food.type,\r\n                text: translations[food.type],\r\n                foods: [{ ...food, count: 0 }],\r\n                active: false\r\n            })\r\n    });\r\n    return sections\r\n};\r\n\r\nexport {\r\n    reducer as foodsReducer,\r\n    foodsLoading, foodsError, foodsSuccess,\r\n    clearCounts, setCounts, setActiveSection,\r\n    initialFoods,\r\n    getFoods, updateCounts, getSections\r\n};\r\n","import React, {FC} from 'react';\r\nimport { useDispatch } from '../../../services/types/hooks-types';\r\nimport iStyles from '../burger-ingredients.module.css';\r\nimport { setActiveSection } from '../../../services/slicers/foods/foods';\r\nimport { TingredientsMenuProps } from '../../../utils/proptypes';\r\n\r\nexport const IngredientsMenu: FC<TingredientsMenuProps> = React.memo(\r\n    ({ sections}) => {\r\n        const dispatch = useDispatch();\r\n\r\n        return (\r\n            <div className={iStyles.menu}>\r\n                <h1 className={\"text text_type_main-large mb-5\"}>Соберите бургер</h1>\r\n                <nav className={iStyles.navigation}>\r\n                    {sections.map(link => (\r\n                        <a\r\n                            key={link.id}\r\n                            href={`#${link.id}`}\r\n                            className={(link.active ? iStyles.navLinkActive : iStyles.navLink)\r\n                                + \" pt-4 pb-4 text text_type_main-default\"}\r\n                            onClick={() => dispatch(setActiveSection(link.id))}\r\n                        >\r\n                            {link.text}\r\n                        </a>\r\n                    ))}\r\n                </nav>\r\n            </div>\r\n        )\r\n    }\r\n)\r\n\r\n\r\n","import React, {FC} from 'react';\r\nimport iStyles from '../burger-ingredients.module.css';\r\nimport { useDispatch } from '../../../services/types/hooks-types';\r\nimport { useLocation, Link } from 'react-router-dom';\r\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TingredientCardProps } from '../../../utils/proptypes';\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nexport const IngredientCard: FC<TingredientCardProps> = React.memo(\r\n    ({ food }) => {\r\n        const dispatch = useDispatch();\r\n        const location = useLocation();\r\n\r\n        const [, dragRef] = useDrag({\r\n            type: \"food\",\r\n            item: food\r\n        });\r\n\r\n\r\n        return (\r\n            <Link to={{\r\n                pathname: `/ingredients/${food._id}`,\r\n                state: { background: location }\r\n            }}>\r\n                <li className={iStyles.card}\r\n                    onClick={() => dispatch({ type: \"ingredient/openIngredient\", payload: food })}>\r\n                    <img className={iStyles.cardImage} src={food.image} alt={food.name} ref={dragRef} />\r\n                    <div className={iStyles.cardText}>\r\n                        <div className={iStyles.cardPrice}>\r\n                            <span className=\"text text_type_main-medium m-2\" style={{ lineHeight: \"1\" }}>{food.price}</span>\r\n                            <CurrencyIcon type={\"primary\"} />\r\n                        </div>\r\n                        <h3 className={iStyles.cardTitle + \" text text_type_main-default\"}>{food.name}</h3>\r\n                    </div>\r\n                    <div className={iStyles.count}>\r\n                        {!!food.count && <Counter count={food.count} size=\"default\" />}\r\n                    </div>\r\n                </li>\r\n            </Link>\r\n        )\r\n    }\r\n);","import React, { FC } from 'react';\r\nimport iStyles from '../burger-ingredients.module.css';\r\nimport { useEffect, useRef } from 'react';\r\nimport { IngredientCard } from './ingredient-card';\r\nimport { TingredientsMenuProps } from '../../../utils/proptypes';\r\n\r\nexport const IngredientsSections: FC<TingredientsMenuProps> = React.memo(\r\n    ({ sections }) => {\r\n\r\n        const lastSectionRef = useRef<HTMLLIElement>(null);\r\n\r\n        useEffect(() => {\r\n            if (lastSectionRef !== null && lastSectionRef.current !== null) {\r\n                const sectionHeight = lastSectionRef.current.offsetHeight;\r\n                let boxHeight = 0;\r\n                const ingredientsElem = lastSectionRef.current.closest('#ingredients');\r\n\r\n                if (ingredientsElem !== null) {\r\n                    boxHeight = ingredientsElem.clientHeight;\r\n                }\r\n\r\n                if (boxHeight > sectionHeight) {\r\n                    lastSectionRef.current.style.paddingBottom = boxHeight - sectionHeight + \"px\";\r\n                }\r\n            }\r\n        }, [sections]);\r\n\r\n        return (\r\n            <ul className={iStyles.sections}>\r\n                {sections.map((section, i) => (\r\n                    <li className={iStyles.sectionFood}\r\n                        key={section.id}\r\n                        id={section.id}\r\n                        ref={i === (sections.length - 1) ? lastSectionRef : undefined}\r\n                    >\r\n                        <h2 className=\"text text_type_main-medium\">{section.text}</h2>\r\n                        <ul className={iStyles.cards}>\r\n                            {section.foods.map(f =>\r\n                                <IngredientCard\r\n                                    key={f._id}\r\n                                    food={f}\r\n                                />)}\r\n                        </ul>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        )\r\n    }\r\n)\r\n\r\n\r\n\r\n\r\n\r\n","import React, { FC } from 'react';\r\nimport { Tscrollbox } from \"../../utils/proptypes\";\r\nimport { useEffect, useState, useRef, useCallback } from 'react';\r\nimport sboxStyles from './scrollbox.module.css';\r\n\r\n\r\nexport const ScrollBox: FC<Tscrollbox> = React.memo(\r\n    (props) => {\r\n        const [curBlockId, setCurBlockId] = useState<string|undefined>(\"\");\r\n        const containerRef = useRef(null);\r\n        const contentRef = useRef(null);\r\n        const scrollContainerRef = useRef(null);\r\n        const scrollbarRef = useRef(null);\r\n\r\n        useEffect(() => {\r\n            const container: any = containerRef.current;\r\n            const content: any = contentRef.current;\r\n            const scrollContainer: any = scrollContainerRef.current;\r\n            const scrollbar: any = scrollbarRef.current;\r\n\r\n            container.style.paddingBottom = !!props.bottom ? String(props.bottom) + \"px\" : \"0px\";\r\n            scrollContainer.style.top = !!props.top ? String(props.top) + \"px\" : \"0px\";\r\n            scrollContainer.style.bottom = !!props.bottom ? props.bottom + \"px\" : \"0px\";\r\n            scrollbar.style.height = String(scrollContainer.clientHeight * content.clientHeight / content.scrollHeight) + \"px\";\r\n\r\n            const setScroll = () => {\r\n                if (content.scrollHeight > content.clientHeight) {\r\n                    scrollContainer.style.visibility = \"visible\";\r\n                    scrollbar.style.top = scrollContainer.clientHeight * content.scrollTop / content.scrollHeight + \"px\";\r\n                    if (!!props.arrBlocksId) {\r\n                        setCurBlockId(getActiveSectionId())\r\n                    }\r\n                } else {\r\n                    scrollContainer.style.visibility = \"hidden\";\r\n                }\r\n            };\r\n\r\n            const pushScrollbar = (start: { preventDefault: () => void; pageY: number; }) => {\r\n                start.preventDefault();\r\n                content.style.scrollBehavior = \"auto\";\r\n                const y = scrollbar.offsetTop;\r\n\r\n                const moveContent = function (end: { pageY: number; }) {\r\n                    const diff = end.pageY - start.pageY;\r\n                    const relativeScrollTop =\r\n                        Math.min(scrollContainer.clientHeight - scrollbar.clientHeight, Math.max(0, y + diff))\r\n                        / scrollContainer.clientHeight;\r\n                    content.scrollTop = content.scrollHeight * relativeScrollTop;\r\n                };\r\n\r\n                const removeListeners = () => {\r\n                    document.removeEventListener('mousemove', moveContent);\r\n                    document.removeEventListener('mouseup', removeListeners);\r\n                    content.style.scrollBehavior = \"smooth\";\r\n                };\r\n\r\n                document.addEventListener('mousemove', moveContent);\r\n                document.addEventListener('mouseup', removeListeners);\r\n            };\r\n\r\n            setScroll();\r\n            content.addEventListener('scroll', setScroll);\r\n            scrollbar.addEventListener('mousedown', pushScrollbar);\r\n        }, [props]);\r\n\r\n        useEffect(() => {\r\n            if (!!curBlockId && !!props.callbackScroll) {\r\n                props.callbackScroll(curBlockId)\r\n            }\r\n        }, [curBlockId, props]);\r\n\r\n        const getActiveSectionId = useCallback(():string|undefined => {\r\n            const container: any = containerRef.current;\r\n            const containerTop: any = container.getBoundingClientRect().top;\r\n            const containerBottom: any = container.clientHeight + containerTop;\r\n            let curId;\r\n            let maxRelativeHeight = 0;\r\n            if (!!props.arrBlocksId) {\r\n                props.arrBlocksId.forEach(id => {\r\n                    const section = document.querySelector(`#${id}`);\r\n                    if (!!section) {\r\n                        const sectionTop = section.getBoundingClientRect().top;\r\n                        const sectionBottom = section.clientHeight + sectionTop;\r\n                        const offTop = containerTop > sectionTop ? containerTop - sectionTop : 0;\r\n                        const offBottom = containerBottom < sectionBottom ? sectionBottom - containerBottom : 0;\r\n                        const viewRelativeHeight = (section.clientHeight - offTop - offBottom) / section.clientHeight;\r\n\r\n                        if (viewRelativeHeight > maxRelativeHeight) {\r\n                            maxRelativeHeight = viewRelativeHeight\r\n                            curId = id\r\n                        };\r\n                    }\r\n                });\r\n            }\r\n            return curId\r\n        }, [props])\r\n\r\n        return (\r\n            <section className={sboxStyles.container} id={!!props.id ? props.id : \"scrollbox\"} ref={containerRef}>\r\n                <div className={sboxStyles.scrollBarContainer} ref={scrollContainerRef}>\r\n                    <div className={sboxStyles.scrollbar} ref={scrollbarRef}></div>\r\n                </div>\r\n                <div className={sboxStyles.content} ref={contentRef}>\r\n                    {props.children}\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n);\r\n\r\n","import { FC } from 'react';\r\nimport iStyles from './burger-ingredients.module.css';\r\nimport { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks-types';\r\nimport { IngredientsMenu } from './components/ingredients-menu';\r\nimport { IngredientsSections } from './components/ingredients-sections';\r\nimport { ScrollBox } from '../scrollbox/scrollbox';\r\nimport { setActiveSection } from '../../services/slicers/foods/foods';\r\n\r\nexport const BurgerIngredients: FC = () => {\r\n    const sections = useSelector(store => store.foods.sections);\r\n    const dispatch = useDispatch();\r\n\r\n    const updateMenu = useCallback((id) => {\r\n        const prevActive = sections.find(s => s.active);\r\n        if (!prevActive || prevActive.id !== id) {\r\n            dispatch(setActiveSection(id))\r\n        }\r\n    }, [sections, dispatch])\r\n\r\n    return (\r\n        <article className={iStyles.ingredients}>\r\n            {!!sections.length &&\r\n                <>\r\n                <IngredientsMenu sections={sections} />\r\n                    <ScrollBox\r\n                        top={40}\r\n                        bottom={16}\r\n                        id={\"ingredients\"}\r\n                        arrBlocksId={sections.map(m => m.id)}\r\n                        callbackScroll={updateMenu}\r\n                    >\r\n                        <IngredientsSections sections={sections} />\r\n                    </ScrollBox>\r\n                </>\r\n            }\r\n        </article>\r\n    )\r\n}\r\n","import React, { FC, useRef } from 'react';\r\nimport { useDrop, useDrag } from \"react-dnd\";\r\nimport { TmovedElementProps } from '../../utils/proptypes';\r\n\r\nexport const MovedElement: FC <TmovedElementProps> = ({ id, children, index, moveElement }) => {\r\n    const ref = useRef<HTMLInputElement>(null);\r\n    const [{ handlerId }, drop] = useDrop({\r\n        accept: 'card',\r\n        collect(monitor) {\r\n            return {\r\n                handlerId: monitor.getHandlerId(),\r\n            };\r\n        },\r\n        hover(item: any, monitor) {\r\n            if (!ref.current) {\r\n                return;\r\n            }\r\n            const dragIndex = item.index;\r\n            const hoverIndex = index;\r\n            if (dragIndex === hoverIndex) {\r\n                return;\r\n            }\r\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n            const clientOffset = monitor.getClientOffset()!;\r\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n                return;\r\n            }\r\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n                return;\r\n            }\r\n            moveElement(dragIndex, hoverIndex);\r\n            item.index = hoverIndex;\r\n        },\r\n    });\r\n    const [{ isDragging }, drag] = useDrag({\r\n        type: \"card\",\r\n        item: () => {\r\n            return { id, index };\r\n        },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    });\r\n    const style = {\r\n        padding: '0',\r\n        margin: '0',\r\n        backgroundColor: 'transparent',\r\n        cursor: 'pointer',\r\n    };\r\n    const opacity = isDragging ? 0 : 1;\r\n\r\n    drag(drop(ref));\r\n\r\n    return (<div\r\n        ref={ref}\r\n        data-handler-id={handlerId}\r\n        style={{ ...style, opacity }}\r\n    >\r\n        {children}\r\n    </div>);\r\n};","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { updateCounts } from '../foods/foods';\r\nimport { createRandomRecipe, getBurgerByRecipe } from '../../../utils/helpers';\r\nimport { TBurgerConstructorState } from './burger-constructor-types';\r\nimport { Tfood } from '../../../utils/proptypes';\r\nimport { AppThunk, AppDispatch, GetState } from '../../types/store-types';\r\n\r\nconst initialBurger: TBurgerConstructorState = {\r\n    recipe: [],\r\n    totalPrice: null,\r\n    bun: null,\r\n    filling: []\r\n};\r\n\r\nconst burgerSlice = createSlice({\r\n    name: 'burger',\r\n    initialState: initialBurger,\r\n    reducers: {\r\n        clear: (state) => initialBurger,\r\n        random: (state, action) => {\r\n            const foods = action.payload;\r\n            return getBurgerByRecipe(createRandomRecipe(foods));\r\n        },\r\n        del: (state, action) => {\r\n            const recipeAfterDel = state.filling.filter(f => f.unicId !== action.payload);\r\n            if (!!state.bun) {\r\n                recipeAfterDel.push(state.bun)\r\n            };\r\n            return getBurgerByRecipe(recipeAfterDel);\r\n        },\r\n        add: (state, action: PayloadAction<Tfood>) => {\r\n            const newFood = { ...action.payload };\r\n            let addRecipe = [...state.recipe];\r\n            if (newFood.type === \"bun\" && !!state.bun) {\r\n                addRecipe.splice(\r\n                    addRecipe.findIndex(f => f.type === \"bun\"), 1, newFood)\r\n            } else {\r\n                addRecipe.push(newFood)\r\n            }\r\n\r\n            return getBurgerByRecipe(addRecipe)\r\n        },\r\n        sort: (state, action) => {\r\n            const filling = action.payload;\r\n            state.filling = filling\r\n        }\r\n    },\r\n});\r\n\r\nconst addInRecipe: (food: Tfood) => (dispatch: AppDispatch, getState: GetState) => Promise<void>\r\n    = (food: Tfood) => {\r\n    return async function (dispatch, getState) {\r\n        await dispatch({ type: 'burger/add', payload: food });\r\n        updateCounts(dispatch, getState);\r\n    }\r\n}\r\n\r\nconst delFromRecipe: (food: Tfood) => (dispatch: AppDispatch, getState: GetState) => void\r\n    = (food: Tfood) => {\r\n    return function (dispatch, getState) {\r\n        dispatch({ type: 'burger/del', payload: food.unicId });\r\n        updateCounts(dispatch, getState);\r\n    }\r\n}\r\n\r\nconst clearRecipe: AppThunk = () => {\r\n    return function (dispatch: AppDispatch) {\r\n        dispatch({ type: 'burger/clear' });\r\n        dispatch({ type: 'foods/clearCounts' })\r\n    }\r\n}\r\n\r\nconst randomRecipe: () => (dispatch: AppDispatch, getState: GetState) => Promise<void>\r\n    = () => {\r\n    return async function (dispatch: AppDispatch, getState: GetState) {\r\n        const foods = getState().foods.items;\r\n        await dispatch({ type: 'burger/random', payload: foods });\r\n        updateCounts(dispatch, getState);\r\n    }\r\n}\r\n\r\nconst { actions, reducer } = burgerSlice;\r\nconst { clear, random, del, add } = actions;\r\n\r\nexport {\r\n    reducer as burgerReducer,\r\n    clear, random, del, add,\r\n    addInRecipe, delFromRecipe, clearRecipe, randomRecipe,\r\n    initialBurger\r\n};\r\n","import React, { FC, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from '../../../services/types/hooks-types';\r\nimport cStyles from '../burger-constructor.module.css';\r\nimport { MovedElement } from '../../moved-element/moved-element';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ScrollBox } from '../../scrollbox/scrollbox';\r\nimport update from 'immutability-helper';\r\nimport { delFromRecipe } from '../../../services/slicers/burger-constructor/burger-constructor';\r\n\r\n\r\nexport const Filling:FC <{isDrag: boolean, canDrop: boolean}> = React.memo(() => {\r\n    const filling = useSelector(store => store.burger.filling);\r\n    const dispatch = useDispatch();\r\n    \r\n        const moveElement = useCallback((dragIndex, hoverIndex) => {\r\n            const dragCard = filling[dragIndex];\r\n            dispatch({\r\n                type: 'burger/sort',\r\n                payload: update(filling, {\r\n                    $splice: [\r\n                        [dragIndex, 1],\r\n                        [hoverIndex, 0, dragCard],\r\n                    ],\r\n                })\r\n            })\r\n        }, [filling, dispatch]);\r\n\r\n        return (\r\n            <div className={cStyles.filling} id=\"filling\">\r\n                <ScrollBox\r\n                    top={40}\r\n                    id={\"burgers\"}\r\n                >\r\n                    <div className={cStyles.recipe}>\r\n                        {filling.map((item, i) =>\r\n                            <MovedElement key={item.unicId} index={i} id={item.unicId} moveElement={moveElement}>\r\n                                <DragIcon type=\"primary\" />\r\n                                <ConstructorElement\r\n                                    text={item.name}\r\n                                    price={item.price}\r\n                                    thumbnail={item.image}\r\n                                    handleClose={() => dispatch(delFromRecipe(item))}\r\n                            />\r\n                        </MovedElement>\r\n                        )}\r\n                    </div>\r\n                </ScrollBox>\r\n            </div>\r\n        )\r\n    }\r\n);","import { createSlice } from '@reduxjs/toolkit';\r\nimport { loadOrderNumber } from '../../../utils/api';\r\nimport { Torders } from '../../../utils/proptypes';\r\nimport { AppDispatch, GetState } from '../../types/store-types';\r\n\r\nconst initialOrders: Torders = {\r\n    items: [],\r\n    isLoading: false,\r\n    isError: false,\r\n    openDetails: false,\r\n    currentNumber: null\r\n};\r\n\r\nconst ordersSlice = createSlice({\r\n    name: 'orders',\r\n    initialState: initialOrders,\r\n    reducers: {\r\n        closeDetails: (state) => {\r\n            state.openDetails = false;\r\n            state.currentNumber = null\r\n        },\r\n        orderLoading: (state) => {\r\n            state.openDetails = true;\r\n            state.isLoading = true;\r\n            state.isError = false\r\n        },\r\n        orderError: (state) => {\r\n            state.isLoading = false;\r\n            state.isError = true\r\n        },\r\n        orderSuccess: (state, action) => {\r\n            state.items = [...state.items, action.payload];\r\n            state.currentNumber = action.payload.number;\r\n            state.isLoading = false;\r\n            state.isError = false\r\n        }\r\n    },\r\n});\r\n\r\n\r\nconst { actions, reducer } = ordersSlice;\r\nconst { orderLoading, orderError, orderSuccess, closeDetails } = actions;\r\n\r\n\r\nfunction getOrderNumber(arrId: Array<string>) {\r\n    return function (dispatch: AppDispatch, getState: GetState) {\r\n        dispatch(orderLoading());\r\n        const { totalPrice, recipe } = getState().burger;\r\n        loadOrderNumber(arrId)\r\n            .then(result => dispatch(\r\n                orderSuccess({\r\n                    ...result,\r\n                    number: result.order.number,\r\n                    totalPrice,\r\n                    recipe\r\n                }))\r\n            )\r\n            .catch(e => {\r\n                console.log(\"Error with order:\", e);\r\n                dispatch(orderError())\r\n            })\r\n    }\r\n};\r\n\r\n\r\nexport {\r\n    reducer as ordersReducer, getOrderNumber,\r\n    orderLoading, orderError, orderSuccess, closeDetails,\r\n    initialOrders\r\n};\r\n","import React from 'react';\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from '../../../services/types/hooks-types';\r\nimport { useHistory } from 'react-router-dom';\r\nimport cStyles from '../burger-constructor.module.css';\r\nimport { Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { getOrderNumber } from '../../../services/slicers/orders/orders';\r\n\r\nconst resizeCurrencyIcon = () => {\r\n    const price: Element | null = document.querySelector('#orderPrice');\r\n    const svgIcon: Element | null = price !== null ? price.querySelector('svg') : null;\r\n    const priceSize: string = price !== null ? getComputedStyle(price).fontSize : \"16px\";\r\n    if (svgIcon !== null) {\r\n        svgIcon.setAttribute('width', priceSize);\r\n        svgIcon.setAttribute('height', priceSize);\r\n    }\r\n}\r\n\r\nexport const ConfirmOrder = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const burger = useSelector(store => store.burger);\r\n    const isAuth = useSelector(store => store.profile.user.isAuth);\r\n\r\n    useEffect(() => {\r\n        resizeCurrencyIcon()\r\n    }, []);\r\n\r\n    const confirmOrder = useCallback(() => {\r\n        isAuth\r\n            ? dispatch(getOrderNumber(burger.recipe.map(ing => ing._id)))\r\n            : history.push(\"/login\")\r\n    }, [dispatch, burger.recipe])\r\n\r\n    return (\r\n        <div className={cStyles.confirm}>\r\n            <div className={cStyles.orderPrice + \" text text_type_main-large\"} id=\"orderPrice\">\r\n                <span className=\"m-3\" style={{ lineHeight: \"1\" }}>{burger.totalPrice}</span>\r\n                <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n            <Button\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                onClick={confirmOrder}\r\n            >\r\n                Оформить заказ\r\n            </Button>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, {FC} from 'react';\r\nimport cStyles from '../burger-constructor.module.css';\r\n\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch } from '../../../services/types/hooks-types';\r\nimport { clearRecipe, randomRecipe } from '../../../services/slicers/burger-constructor/burger-constructor';\r\n\r\nexport const ConstructorMenu: FC = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <div className={cStyles.menu}>\r\n            <Button type=\"primary\" size=\"small\" onClick={() => dispatch(randomRecipe())}>\r\n                Рецепт от нашего робота\r\n            </Button>\r\n            <Button type=\"primary\" size=\"small\" onClick={() => dispatch(clearRecipe())}>\r\n                Сбросить рецепт\r\n            </Button>\r\n        </div>\r\n    )\r\n}","import {FC} from 'react';\r\nimport oStyles from './modal-overlay.module.css';\r\n\r\ndeclare module 'react' {\r\n    interface HTMLAttributes<T> extends DOMAttributes<HTMLDivElement> {\r\n        // extends React's HTMLAttributes\r\n        onClick?: MouseEventHandler<HTMLDivElement> | undefined | null | (()=>void);\r\n    }\r\n}\r\n\r\nexport const ModalOverlay: FC<{onClose: (() => void) | null}> = (props) => {\r\n    \r\n    return (\r\n        <div className={oStyles.overlay} onClick={props.onClose}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n};\r\n","import React, { FC } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { useEffect } from 'react';\r\nimport mStyles from './modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport { Tmodal } from '../../utils/proptypes';\r\nconst modalRoot: Element = document.getElementById('modal')!;\r\n\r\n\r\nexport const Modal: FC<Tmodal> = React.memo(\r\n    ({ children, isLoading, onClose, title }) => {\r\n\r\n        useEffect(() => {\r\n            document.addEventListener('keydown', closeByKey);\r\n            return () => { document.removeEventListener('keydown', closeByKey) };\r\n        }, [isLoading]);\r\n\r\n        const closeByKey = (e: KeyboardEvent) => {\r\n            if (e.key === \"Escape\" && !isLoading) {\r\n                onClose()\r\n            }\r\n        }\r\n\r\n        return ReactDOM.createPortal(\r\n            (<ModalOverlay onClose={isLoading ? null : onClose}>\r\n                <div className={mStyles.modalBox} onClick={(e) => e.stopPropagation()}>\r\n                    {!isLoading && <button className={mStyles.closePosition}>\r\n                        <CloseIcon onClick={onClose} type={\"primary\"}/>\r\n                    </button>}\r\n\r\n                    {title &&\r\n                        <p className={\"text text_type_main-large\"}>\r\n                            {title}\r\n                        </p>\r\n                    }\r\n\r\n                    <div className={mStyles.content}>\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            </ModalOverlay>), modalRoot)\r\n    }\r\n);\r\n\r\n","export default __webpack_public_path__ + \"static/media/icon-done.e036971b.png\";","import React, { useEffect } from 'react';\r\nimport oStyles from \"./order-details.module.css\";\r\nimport { useState } from 'react';\r\nimport { randomInteger } from '../../utils/helpers';\r\n\r\nexport const LoaderNumber = () => {\r\n    const randomNumber = () => randomInteger(1000, 9999);\r\n    const [number, setNumber] = useState(randomNumber)\r\n\r\n    useEffect(() => {        \r\n        let timerNumber = setInterval(() =>\r\n            setNumber(randomNumber)\r\n        , 50);\r\n        return () => { clearInterval(timerNumber) };\r\n    }, [])\r\n\r\n    return(\r\n        <h1 className={oStyles.titleLoader + \" text text_type_digits-large\"}>{number}</h1>\r\n    )\r\n}","import React, { FC } from 'react';\r\nimport { Ttext } from '../../utils/proptypes';\r\nimport lStyles from './loader.module.css';\r\nimport { BurgerIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const Loader:FC<Ttext> = React.memo(\r\n    ({ text = \"Загружаем...\" }) => {\r\n        const icons = [1, 2, 3, 4, 5];\r\n\r\n        return (\r\n            <div className={lStyles.container}>\r\n                <div className={lStyles.icons}>\r\n                    {icons.map(icon =>\r\n                        <div\r\n                            key={icon + \"loader\"}\r\n                            className={lStyles.icon}\r\n                            style={{\r\n                                top: (70 * Math.sin(icon * 2 * Math.PI / icons.length)) + \"px\",\r\n                                left: (70 * Math.cos(icon * 2 * Math.PI / icons.length)) + \"px\"\r\n                            }}\r\n                        >\r\n                            <BurgerIcon type=\"primary\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <p className=\"text text_type_main-medium\">\r\n                    {text}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n)","import React, {FC} from 'react';\r\nimport eStyles from './error-message.module.css';\r\nimport { BurgerIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ItextArr } from '../../utils/proptypes';\r\n\r\nexport const ErrorMessage:FC<ItextArr> = React.memo(\r\n    ({ textArr }) => {\r\n        const initialTextArr = [\"Что-то пошло не так.\", \"Попробуйте обновить страницу.\"];\r\n        const errorArr = !!textArr ? textArr : initialTextArr;\r\n        \r\n        return (\r\n            <div className={eStyles.container}>\r\n                <div className={eStyles.icons}>\r\n                    <BurgerIcon type=\"error\" />\r\n                    <BurgerIcon type=\"error\" />\r\n                    <BurgerIcon type=\"error\" />\r\n                </div>\r\n                {errorArr.map((text, i) =>\r\n                    <p className=\"text text_type_main-medium m-4\" key={i + text}>{text}</p>)\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n);","import React, { FC } from 'react';\r\nimport oStyles from \"./order-details.module.css\";\r\nimport iconDonePath from \"../../images/icon-done.png\"\r\nimport { LoaderNumber } from './order-loader-number';\r\nimport { Loader } from '../loader/loader';\r\nimport { ErrorMessage } from '../error-message/error-message';\r\nimport { Torders } from '../../utils/proptypes';\r\n\r\nexport const OrderDetails: FC<{ orders: Torders }> = React.memo(\r\n    ({ orders }) => {\r\n\r\n        return (\r\n            <div className={oStyles.container}>\r\n\r\n                {!orders.isError\r\n                    ? <>\r\n                        {orders.isLoading\r\n                            ? <LoaderNumber />\r\n                            : <h1 className={oStyles.title + \" text text_type_digits-large\"}>{orders.currentNumber}</h1>\r\n                        }\r\n                        <p className=\"text text_type_main-medium\">идентификатор заказа</p>\r\n\r\n                        {orders.isLoading\r\n                            ? < Loader text={\"\"} />\r\n                            : <img className={oStyles.icon} src={iconDonePath} alt=\"icon_done\" />\r\n                        }\r\n\r\n                        <p className=\"text text_type_main-default mb-2\">\r\n                            {orders.isLoading ? \"отправляем на кухню\" : \"ваш заказ начали готовить\"}\r\n                        </p>\r\n                        <span className=\"text text_type_main-default text_color_inactive\">Дождитесь готовности на орбитальной станции</span>\r\n                    </>\r\n                    : <ErrorMessage textArr={[\"Извините, заказ не удалось принять\", \"Попробуйте отправить его еще раз\"]} />\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n)\r\n","import React, {FC} from 'react';\r\n\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport cStyles from './burger-constructor.module.css';\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Filling } from './components/constructor-filling';\r\nimport { ConfirmOrder } from './components/constructor-confirm';\r\nimport { ConstructorMenu } from './components/constructor-menu';\r\nimport { Modal } from '../modal/modal';\r\nimport { OrderDetails } from '../order-details/order-details';\r\nimport { addInRecipe, clearRecipe } from '../../services/slicers/burger-constructor/burger-constructor';\r\nimport { Tfood } from '../../utils/proptypes';\r\n\r\n\r\nimport { useDrop } from \"react-dnd\";\r\n\r\ndeclare module 'react' {\r\n    interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {\r\n        // extends React's HTMLAttributes\r\n        drop?: string;\r\n        drag?: string;\r\n    }\r\n}\r\n\r\nexport const BurgerConstructor: FC = () => {\r\n    const burger = useSelector(store => store.burger);\r\n    const orders = useSelector(store => store.orders);\r\n    const dispatch = useDispatch();\r\n\r\n    const onDropHandler = (item: Tfood) => {\r\n        dispatch(addInRecipe(item));\r\n    };\r\n\r\n    const [{ canDrop, isOver }, dropTarget] = useDrop({\r\n        accept: \"food\",\r\n        drop: (item: Tfood) => onDropHandler(item),\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop()\r\n        }),\r\n    });\r\n\r\n    const onCloseOrder = () => {\r\n        dispatch({ type: 'orders/closeDetails' });\r\n        dispatch(clearRecipe());\r\n    }\r\n\r\n    return (\r\n        <article className={cStyles.main} >\r\n            <ConstructorMenu />\r\n\r\n            <div className={cStyles.dropContainer} id=\"dropContainer\"\r\n                ref={dropTarget}\r\n                drop={String(isOver && canDrop)}\r\n                drag={String(!isOver && canDrop )}\r\n            >\r\n                {!!burger.bun &&\r\n                    <ConstructorElement\r\n                        type=\"top\"\r\n                        isLocked={true}\r\n                        text={burger.bun.name + \" (верх)\"}\r\n                        price={burger.bun.price}\r\n                        thumbnail={burger.bun.image}\r\n                    />\r\n                }\r\n                {!!burger.filling.length &&\r\n                    <Filling\r\n                        isDrag={isOver && canDrop}\r\n                        canDrop={canDrop}\r\n                    />\r\n                }\r\n                {!!burger.bun &&\r\n                    <ConstructorElement\r\n                        type=\"bottom\"\r\n                        isLocked={true}\r\n                        text={burger.bun.name + \" (низ)\"}\r\n                        price={burger.bun.price}\r\n                        thumbnail={burger.bun.image}\r\n                    />\r\n                }\r\n            </div>\r\n\r\n            {(!!burger.bun && !!burger.filling.length) &&\r\n                <ConfirmOrder />\r\n            }\r\n\r\n            <div style={{ overflow: 'hidden' }}>\r\n                {orders.openDetails &&\r\n                    <Modal onClose={onCloseOrder} isLoading={orders.isLoading}>\r\n                        <OrderDetails orders={orders} />\r\n                    </Modal>\r\n                }\r\n            </div>\r\n        </article >\r\n    )\r\n}\r\n","import React, {FC} from 'react';\r\nimport { useSelector } from '../../services/types/hooks-types';\r\nimport pStyles from '../pages.module.css';\r\nimport { BurgerIngredients } from '../../components/burger-ingredients/burger-ingredients';\r\nimport { BurgerConstructor } from '../../components/burger-constructor/burger-constructor';\r\nimport { ErrorMessage } from '../../components/error-message/error-message';\r\nimport { Loader } from '../../components/loader/loader';\r\n\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\n\r\nexport const BurgerConstructorPage: FC = () => {\r\n    const { isLoading, isError, isLoaded } = useSelector(store => store.foods);\r\n\r\n    return (\r\n        <>\r\n            {isLoaded &&\r\n                <DndProvider backend={HTML5Backend}>\r\n                    <div className={pStyles.content}>\r\n                        <BurgerIngredients />\r\n                        <BurgerConstructor />\r\n                    </div>\r\n                </DndProvider>\r\n            }\r\n            {isLoading && <Loader text={\"Обновляем меню\"} />}\r\n            {isError && <ErrorMessage />}            \r\n        </>\r\n    )\r\n}","import React, { FC } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport fStyles from './form.module.css';\r\nimport { TFooterLinksProps } from \"../../utils/proptypes\";\r\n\r\nexport const AuthFormFooter: FC<TFooterLinksProps> = ({ footerLinks }) => {\r\n    return (\r\n        <div className={fStyles.footer}>\r\n            {footerLinks.map((link, i) =>\r\n                <div key={i} className={fStyles.footerBlock}>\r\n                    <span className={`text text_type_main-default ${fStyles.footerDesc}`}>{link.desc}</span>\r\n                    &nbsp;&nbsp;\r\n                    <Link to={link.pathname}>\r\n                        <span className={`text text_type_main-default ${fStyles.footerLink}`}> {link.text} </span>\r\n                    </Link>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}","import React, { FC, useEffect } from \"react\";\r\nimport { TAuthFormProps } from '../../utils/proptypes';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport fStyles from './form.module.css';\r\nimport { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { AuthFormFooter } from \"./auth-form-footer\";\r\n\r\nexport const AuthForm: FC<TAuthFormProps> = ({ data }) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { title, arrInputs, footerLinks, confirm } = data;\r\n    const inputs = useSelector(store => store.authForm.arrInputs);\r\n\r\n    useEffect(() => {\r\n        dispatch({type: \"auth/setInputs\", payload: arrInputs})\r\n    }, []);\r\n\r\n    const confirmForm = (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n        confirm.callback();\r\n    }\r\n\r\n    return (\r\n        <form className={fStyles.form} onSubmit={(event) => confirmForm(event)}>\r\n            {!!title && <h2 className=\"text text_type_main-medium\">{title}</h2>}\r\n            {inputs.map(input =>\r\n                <Input\r\n                    key={input.name}\r\n                    type={input.type}\r\n                    name={input.name}\r\n                    value={input.value}\r\n                    icon={input.type === \"password\" ? \"HideIcon\" : input.icon!}\r\n                    placeholder={input.placeholder}\r\n                    onChange={(event) => dispatch({type: \"auth/handleInput\", payload: {name: input.name, value: event.target.value}})}\r\n                    onIconClick={() => dispatch({type: \"auth/handleIcon\", payload: input})}\r\n                />\r\n            )}\r\n            <Button>\r\n                {!!confirm.text ? confirm.text : \"Отправить\"}\r\n            </Button>\r\n            {!!footerLinks && <AuthFormFooter footerLinks={footerLinks} />}\r\n        </form>\r\n    )\r\n}","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { TprofileState } from './profile-types';\r\nimport { AppThunk, AppDispatch, GetState } from '../../types/store-types';\r\nimport { TinputsForm } from '../../../utils/proptypes';\r\nimport { batch } from 'react-redux';\r\nimport { getUser, updateUser, login, register, logout, checkEmail, setNewPass } from '../../../utils/api';\r\nimport { setCookie } from \"../../../utils/helpers\";\r\nimport { updateToken } from '../../../utils/api';\r\n\r\n//test USER is:\r\n// {\r\n//     name: John,\r\n//     email: aa@aa.ru, либо dd@dd.ru\r\n//     password: 1234\r\n// }\r\n\r\nconst initialProfile: TprofileState = {\r\n    user: {\r\n        email: \"\",\r\n        name: \"\",\r\n        isAuth: false,\r\n        canRestorePass: false,\r\n    },\r\n    form: {\r\n        inputs: {\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\"\r\n        },\r\n    },\r\n\r\n    profileIsLoading: false,\r\n    porfileIsLoaded: false,\r\n    profileIsError: false\r\n};\r\n\r\nexport const profileSlice = createSlice({\r\n    name: 'profile',\r\n    initialState: initialProfile,\r\n    reducers: {\r\n        profileLoading: (state) => {\r\n            state.profileIsLoading = true;\r\n            state.profileIsError = false;\r\n            state.porfileIsLoaded = false;\r\n        },\r\n        profileIsError: (state) => {\r\n            state.profileIsLoading = false;\r\n            state.profileIsError = true;\r\n            state.porfileIsLoaded = false;\r\n        },\r\n        profileSuccess: (state, action) => {\r\n            state.profileIsLoading = false;\r\n            state.profileIsError = false;\r\n            state.porfileIsLoaded = true;\r\n        },\r\n        setProfile: (state, action: PayloadAction<any>) => {\r\n            state.user = { ...action.payload, isAuth: true };\r\n\r\n            state.form.inputs.email = action.payload.email;\r\n            state.form.inputs.name = action.payload.name;\r\n        },\r\n        clearProfile: (state) => initialProfile,\r\n        onChangeInput: (state, action) => {\r\n            const { key, value } = action.payload;\r\n            state.form.inputs = { ...state.form.inputs, [key]: value }\r\n        },\r\n        toggleRestorePass: (state) => {\r\n            state.user = { ...state.user, canRestorePass: !state.user.canRestorePass }\r\n        }\r\n    }\r\n})\r\n\r\n\r\nconst getUserProfile: AppThunk = () => {\r\n    return (dispatch: AppDispatch) => {\r\n        updateToken()\r\n            .then(() => getUser())\r\n            .then(res => dispatch(setProfile(res.user)))\r\n            .then(() => dispatch({ type: \"wsOrders/wsInit\" }))\r\n            .catch((err) => {\r\n                console.log(\"Err with get User\", err);\r\n                dispatch(profileIsError())\r\n            })\r\n    }\r\n}\r\n\r\nconst loginUser = () => {\r\n    return (dispatch: AppDispatch, getState: GetState ) => {\r\n        const data = getState().authForm.data;\r\n\r\n        dispatch({ type: \"profile/profileLoading\" });\r\n        login(data)\r\n            .then(res => {\r\n                const newUser = {\r\n                    name: res.user.name,\r\n                    email: res.user.email\r\n                };\r\n                localStorage.setItem('refreshToken', res.refreshToken);\r\n                setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1]);\r\n\r\n                batch(() => {\r\n                    dispatch({ type: \"profile/setProfile\", payload: newUser });\r\n                    dispatch({ type: \"profile/profileSuccess\" });\r\n                    dispatch({ type: \"auth/clearForm\" });\r\n                })\r\n                return\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error with login\", err);\r\n                dispatch({ type: \"profile/profileIsError\" });\r\n            })\r\n    }\r\n};\r\n\r\nconst registerUser = () => {\r\n    return (dispatch: AppDispatch, getState: GetState) => {\r\n        const data = getState().authForm.data;\r\n\r\n        dispatch({ type: \"profile/profileLoading\" });\r\n        register(data)\r\n            .then(res => {\r\n                const newUser = {\r\n                    name: res.user.name,\r\n                    email: res.user.email\r\n                };\r\n                batch(() => {\r\n                    dispatch({ type: \"profile/setProfile\", payload: newUser });\r\n                    dispatch({ type: \"profile/profileSuccess\" });\r\n                    dispatch({ type: \"auth/clearForm\" });\r\n                })\r\n                localStorage.setItem('refreshToken', res.refreshToken);\r\n                setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1]);\r\n                return\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error with register\", err);\r\n                dispatch({ type: \"profile/profileIsError\" });\r\n            })\r\n    }\r\n};\r\n\r\nconst logoutUser: AppThunk = () => {\r\n    return (dispatch: AppDispatch) => {\r\n        logout()\r\n            .then(() => {\r\n                dispatch(clearProfile());\r\n                localStorage.removeItem('refreshToken');\r\n                setCookie(\"accessToken\", null);\r\n                return\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"Err with logout User\", err);\r\n            })\r\n    }\r\n}\r\n//\r\nconst updateUserProfile: (data: TinputsForm) => (dispatch: AppDispatch) => void\r\n= (data) => {\r\n    return (dispatch) => {\r\n        updateToken()\r\n            .then(() => updateUser(data))\r\n            .then((res:any) => dispatch(setProfile(res.user)))\r\n            .catch((err) => {\r\n                console.log(\"Err with update User\", err);\r\n                dispatch(profileIsError())\r\n            })\r\n    }\r\n}\r\n\r\nconst resetPass: () => (dispatch: AppDispatch, getState: GetState) => void\r\n    = () => {\r\n    return (dispatch, getState) => {\r\n        const data = getState().authForm.data;\r\n        checkEmail(data)\r\n            .then((res) => {\r\n                console.log(\"RESULT of resetPass\", res);\r\n                dispatch(toggleRestorePass());\r\n            })\r\n            .catch(err => console.log(\"Error with reset pass\", err))\r\n    }\r\n};\r\n\r\n\r\nconst restorePass: () => (dispatch: AppDispatch, getState: GetState) => void\r\n    = () => {\r\n    return (dispatch, getState) => {\r\n        const dataInputs = getState().authForm.data;\r\n\r\n        //data without email field\r\n        const data = {\r\n            password: dataInputs.password,\r\n            token: dataInputs.token,\r\n        };\r\n        setNewPass(data)\r\n            .then(() => dispatch(toggleRestorePass()))\r\n            .catch(err => console.log(\"Error with set new pass\", err))\r\n    }\r\n};\r\n\r\nconst { reducer, actions } = profileSlice;\r\nconst { setProfile, clearProfile,\r\n    profileLoading, profileSuccess, profileIsError,\r\n    onChangeInput, toggleRestorePass } = actions;\r\n\r\nexport {\r\n    reducer as profileReducer,\r\n    setProfile, clearProfile,\r\n    profileLoading, profileSuccess, profileIsError,\r\n    onChangeInput, toggleRestorePass,\r\n    getUserProfile,\r\n    loginUser,\r\n    registerUser,\r\n    logoutUser,\r\n    updateUserProfile,\r\n    resetPass,\r\n    restorePass,\r\n    initialProfile\r\n}\r\n\r\n","import React, {FC} from \"react\";\r\nimport { TConfirmForm, Tinputs, TfooterLink, IlocationState } from \"../../utils/proptypes\";\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport { useLocation, Redirect } from 'react-router-dom';\r\nimport { AuthForm } from \"../../components/auth-form/auth-form\";\r\nimport { loginUser } from \"../../services/slicers/profile/profile\";\r\n\r\nexport const LoginPage:FC = () => {\r\n    const location = useLocation<IlocationState>();\r\n    const isAuth = useSelector(store => store.profile.user.isAuth);\r\n    const dispatch = useDispatch();\r\n\r\n    const arrInputs: Tinputs = [\r\n        { name: \"email\", type: \"email\", placeholder: \"E-mail\", value: \"\" },\r\n        { name: \"password\", type: \"password\", placeholder: \"Пароль\", value: \"\" },\r\n    ];\r\n    const footerLinks: Array<TfooterLink> = [\r\n        { desc: \"Вы - новый пользователь?\", text: \"Зарегистрироваться\", pathname: \"/register\" },\r\n        { desc: \"Забыли пароль?\", text: \"Восстановить пароль\", pathname: \"/forgot-password\" },\r\n    ];\r\n\r\n    const confirm: TConfirmForm = {\r\n        callback: () => dispatch(loginUser()),\r\n        text: \"Войти\"\r\n    };\r\n\r\n    const title: string = \"Вход\";\r\n\r\n\r\n    return isAuth\r\n        ? <Redirect to={location.state?.from || '/'} />\r\n        : <AuthForm data={{ title, arrInputs, footerLinks, confirm }} />\r\n}","import React, {FC} from \"react\";\r\nimport { TConfirmForm, Tinputs, TfooterLink } from \"../../utils/proptypes\";\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport { AuthForm } from \"../../components/auth-form/auth-form\";\r\nimport { registerUser } from \"../../services/slicers/profile/profile\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport const RegisterPage:FC = () => {\r\n    const arrInputs: Tinputs = [\r\n        { name: \"name\", type: \"text\", placeholder: \"Имя\", value: \"\" },\r\n        { name: \"email\", type: \"email\", placeholder: \"E-mail\", value: \"\" },\r\n        { name: \"password\", type: \"password\", placeholder: \"Пароль\", value: \"\" },\r\n    ];\r\n\r\n    const footerLinks: Array<TfooterLink> = [\r\n        { desc: \"Уже зарегистрированы?\", text: \"Войти\", pathname: \"/login\" }\r\n    ];\r\n\r\n    const title: string = \"Регистрация\";\r\n    \r\n\r\n    const confirm: TConfirmForm = {\r\n        callback: () => dispatch(registerUser()),\r\n        text: \"Зарегистрироваться\"\r\n    };\r\n\r\n    const dispatch = useDispatch();    \r\n    const isAuth = useSelector(store => store.profile.user.isAuth);\r\n\r\n    return isAuth\r\n        ? <Redirect to={'/'} />\r\n        : <AuthForm data={{ title, arrInputs, footerLinks, confirm }} />\r\n}\r\n\r\n\r\n","import React, { FC } from \"react\";\r\nimport { TConfirmForm, Tinputs, TfooterLink } from \"../../utils/proptypes\";\r\nimport { AuthForm } from \"../../components/auth-form/auth-form\";\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport { resetPass } from \"../../services/slicers/profile/profile\";\r\n\r\nexport const ForgotPassPage: FC = () => {\r\n    const arrInputs: Tinputs = [\r\n        { name: \"email\", type: \"email\", placeholder: \"Укажите e-mail\", value: \"\" }\r\n    ];\r\n    const footerLinks: Array<TfooterLink> = [\r\n        { desc: \"Вспомнили пароль?\", text: \"Войти\", pathname: \"/login\" }\r\n    ];\r\n\r\n    const title: string = \"Восстановление пароля\";\r\n\r\n\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const confirm: TConfirmForm = {\r\n        callback: () => dispatch(resetPass()),\r\n        text: \"Восстановить\"\r\n    };\r\n    const { isAuth, canRestorePass } = useSelector(store => store.profile.user)\r\n    console.log(\"canRestorePass=\", canRestorePass);\r\n        \r\n    return isAuth ? <Redirect to={'/'} />\r\n        : canRestorePass ? <Redirect to={'/reset-password'} />\r\n            : <AuthForm data={{ title, arrInputs, footerLinks, confirm }} />\r\n}\r\n","import React, { FC } from \"react\";\r\nimport { TConfirmForm, Tinputs, TfooterLink } from \"../../utils/proptypes\";\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport { AuthForm } from \"../../components/auth-form/auth-form\";\r\nimport { Redirect } from 'react-router-dom';\r\nimport { restorePass } from \"../../services/slicers/profile/profile\";\r\n\r\nexport const ResetPassPage: FC = () => {\r\n    const arrInputs: Tinputs = [\r\n        { name: \"password\", type: \"password\", placeholder: \"Введите новый пароль\", value: \"\" },\r\n        { name: \"token\", type: \"text\", placeholder: \"Введите код из письма\", value: \"\" },\r\n    ];\r\n\r\n    const footerLinks: Array<TfooterLink> = [\r\n        { desc: \"Вспомнили пароль?\", text: \"Войти\", pathname: \"/login\" }\r\n    ];\r\n\r\n    const title: string = \"Восстановление пароля\";\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    const confirm: TConfirmForm = {\r\n        callback: () => dispatch(restorePass()),\r\n        text: \"Восстановить\"\r\n    };\r\n\r\n    const { isAuth, canRestorePass } = useSelector(store => store.profile.user)\r\n\r\n    return isAuth ? <Redirect to={'/'} />\r\n        : !canRestorePass ? <Redirect to={'/login'} />\r\n            : <AuthForm data={{ title, arrInputs, footerLinks, confirm }} />\r\n}","import React from 'react';\r\nimport pStyles from '../pages.module.css';\r\n\r\nexport const NoPage = () =>\r\n    <h1 className={pStyles.noPage + \" text text_type_main-large\"}>В этой Вселенной страницы такой не существует пока</h1>\r\n\r\nexport const NoOrderPage = () =>\r\n    <h1 className={pStyles.noOrderPage + \" text text_type_main-medium\"}>Номер заказа неизвестный указан</h1>\r\n\r\nexport const NoOrdersPage = () =>\r\n    <h1 className={pStyles.noOrderPage + \" text text_type_main-medium\"}>Не созданы заказы ещё</h1>","\r\nimport React, { FC } from 'react';\r\nimport dStyles from './ingredients-details.module.css';\r\nimport { Tfood } from '../../utils/proptypes';\r\n\r\nexport const IngredientDescription: FC<{ ingredient: Tfood }> = React.memo(\r\n    ({ ingredient, children }) => {\r\n\r\n        return (\r\n            <div className={dStyles.container}>\r\n                <img className={dStyles.image} src={ingredient.image_large} alt={ingredient.name} />\r\n                <h3 className=\"text text_type_main-medium mb-4 mt-4\">{ingredient.name}</h3>\r\n                <div className={dStyles.composition + \" mt-4 mb-8\"}>\r\n                    <div className={dStyles.composeItem}>\r\n                        <span className=\"text text_type_main-default text_color_inactive mb-2\">Калории, кКал</span>\r\n                        <span className=\"text text_type_digits-default text_color_inactive mb-2\">{ingredient.calories}</span>\r\n                    </div>\r\n                    <div className={dStyles.composeItem}>\r\n                        <span className=\"text text_type_main-default text_color_inactive mb-2\">Белки, г</span>\r\n                        <span className=\"text text_type_digits-default text_color_inactive mb-2\">{ingredient.proteins}</span>\r\n                    </div>\r\n                    <div className={dStyles.composeItem}>\r\n                        <span className=\"text text_type_main-default text_color_inactive mb-2\">Жиры, г</span>\r\n                        <span className=\"text text_type_digits-default text_color_inactive mb-2\">{ingredient.fat}</span>\r\n                    </div>\r\n                    <div className={dStyles.composeItem}>\r\n                        <span className=\"text text_type_main-default text_color_inactive mb-2\">Углеводы, г</span>\r\n                        <span className=\"text text_type_digits-default text_color_inactive mb-2\">{ingredient.carbohydrates}</span>\r\n                    </div>\r\n                </div>\r\n                {!!children && children}\r\n            </div>\r\n        )\r\n    }\r\n)","\r\nimport React, {FC} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport { IngredientDescription } from './ingredient-desc';\r\nimport { addInRecipe } from '../../services/slicers/burger-constructor/burger-constructor';\r\nimport { Tfood } from '../../utils/proptypes';\r\n\r\nexport const IngredientsDetails: FC<{ingredient: Tfood}> = React.memo(\r\n    ({ ingredient }) => {\r\n        const bun = useSelector(store => store.burger.bun);\r\n        const dispatch = useDispatch();\r\n        const history = useHistory();\r\n\r\n        const addIngredient = () => {     \r\n            dispatch(addInRecipe(ingredient));\r\n            dispatch({ type: 'ingredient/closeIngredient' });\r\n            history.push('/');\r\n        }\r\n\r\n        return (\r\n            <IngredientDescription ingredient={ingredient}>\r\n                {(ingredient.type !== \"bun\" || JSON.stringify(ingredient) !== JSON.stringify(bun))\r\n                    && <Button type=\"primary\" size=\"medium\" onClick={addIngredient}>\r\n                    {(ingredient.type === \"bun\" && !!bun)\r\n                        ? \"Заменить булку в бургере\"\r\n                        : \"Добавить к бургеру\"}\r\n                    </Button>\r\n                }\r\n            </IngredientDescription>\r\n        )\r\n    }\r\n)","import React, { FC, useState, useEffect } from \"react\";\r\nimport pStyles from '../pages.module.css';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { IngredientDescription } from \"../../components/ingredient-details/ingredient-desc\";\r\nimport { IngredientsDetails } from '../../components/ingredient-details/ingredients-details';\r\nimport { Modal } from '../../components/modal/modal';\r\nimport { ErrorMessage } from '../../components/error-message/error-message';\r\nimport { Loader } from '../../components/loader/loader';\r\nimport { NoPage } from \"..\";\r\nimport { Tfood } from \"../../utils/proptypes\";\r\n\r\nexport const IngredientPageModal = () => {\r\n    const ingredient = useSelector(store => store.ingredient);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const closeModal = () => {\r\n        dispatch({ type: \"ingredient/closeIngredient\" });\r\n        history.push('/');\r\n    }\r\n\r\n    return (\r\n        <div style={{ position: \"fixed\", overflow: \"hidden\" }}>\r\n            {ingredient.show &&\r\n                <Modal\r\n                    title=\"Детали ингредиента\"\r\n                    onClose={closeModal}\r\n                    children={<IngredientsDetails ingredient={ingredient.item!} />}\r\n                />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const IngredientPage = () => {\r\n    const { id } = useParams<{id: string}>();\r\n    const { isLoading, isError, isLoaded, items } = useSelector(store => store.foods);\r\n    const [ingredient, setIngredient] = useState<Tfood>();\r\n\r\n    useEffect(() => {\r\n        if (!!items.length) {\r\n            const ingred = items.find(item => item._id === id);\r\n            if (!!ingred) {\r\n                setIngredient(ingred)\r\n            }\r\n        }\r\n    }, [isLoaded, items, id]);\r\n\r\n    return (\r\n        <div className={pStyles.modalPage}>\r\n            {isLoaded &&\r\n                <>\r\n                    {!!ingredient\r\n                        ? <IngredientDescription ingredient={ingredient} />\r\n                        : <NoPage />}\r\n                </>\r\n            }\r\n            {isLoading && <Loader text={\"Ищем на кухне\"} />}\r\n            {isError && <ErrorMessage />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { FC } from 'react';\r\nimport bStyles from './burger-card.module.css';\r\nimport { TburgerCard, TimageIngredient } from '../../utils/proptypes';\r\n\r\nimport { useLocation, Link } from 'react-router-dom';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDispatch } from '../../services/types/hooks-types';\r\n\r\nexport const BurgerCard: FC<TburgerCard> = React.memo(\r\n    ({ burger }) => {\r\n        const location = useLocation();\r\n        const dispatch = useDispatch();\r\n        const { _id, number, name, ingredients, total, createdAt } = burger;\r\n\r\n        return (\r\n            <Link to={{\r\n                pathname: `${location.pathname}/${_id}`,\r\n                state: { background: location }\r\n            }}>\r\n                <div className={bStyles.card} onClick={() => dispatch({ type: \"burgerOrder/openOrder\", payload: burger })}>\r\n                    <div className={bStyles.cardHeader}>\r\n                        <BurgerNumber number={number} />\r\n                        <BurgerTime time={createdAt} />\r\n                    </div>\r\n                    <p className=\"text text_type_main-medium\">{name}</p>\r\n\r\n                    <div className={bStyles.cardFooter}>\r\n                        <CardFoods images={ingredients.map(ing => ing.image)} />\r\n                        <BurgerPrice total={total} />\r\n                    </div>\r\n\r\n                </div>\r\n            </Link>\r\n        )\r\n\r\n    }\r\n)\r\n\r\nconst CardFoods: FC<{ images: Array<string> }> = ({ images }) => {\r\n    const bigBurger = images.length > 6;\r\n    const items = [...images].reverse(); //reverse & reverse-row for right negative margin\r\n\r\n    return (\r\n        <div className={bStyles.cardImages}>\r\n            {items.map((item, i) =>\r\n                i < 6 && <BurgerIngredientImage\r\n                    key={i}\r\n                    image={item}\r\n                    text={(i === 0 && bigBurger) ? \"+\" + (items.length - 5) : \"\"}\r\n                    type={\"row\"}\r\n                />)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n//--design components--//\r\n\r\nexport const BurgerTime: FC<{ time: string }> = ({ time }) => {\r\n    const curTime = () => {\r\n        const burgerDate = new Date(time);\r\n        const burgerDay = burgerDate.getDate();\r\n        const burgerMonth = burgerDate.getMonth();\r\n        const burgerYear = burgerDate.getFullYear();\r\n        const curDay = new Date().getDate();\r\n        const prevMonthDays = new Date(burgerYear, burgerMonth + 1, 0).getDate();\r\n\r\n        let diffDays: number = curDay >= burgerDay ? curDay - burgerDay : prevMonthDays + curDay - burgerDay;\r\n        const timeLabel: string =\r\n            diffDays === 0 ? \"Сегодня \" :\r\n                diffDays === 1 ? \"Вчера \" :\r\n                    diffDays % 10 === 2 || diffDays % 10 === 3 || diffDays % 10 === 4 ? String(diffDays) + \" дня назад \"\r\n                        : diffDays % 10 === 1 ? String(diffDays) + \" день назад\"\r\n                            : String(diffDays) + \" дней назад \";\r\n        const zoneLabel: string = \" i-GMT\" + burgerDate.toTimeString().substring(12, 18).replaceAll(\"0\", \"\");\r\n\r\n        let timeString =\r\n            timeLabel +\r\n            burgerDate.getHours() + \":\" +\r\n            burgerDate.getMinutes() +\r\n            zoneLabel;\r\n        return timeString\r\n    };\r\n\r\n    return (\r\n        <p className=\"text text_type_main-default\" style={{ color: \"var(--text-secondary-color)\" }}>{curTime()}</p>\r\n    )\r\n}\r\n\r\nexport const BurgerIngredientImage: FC<TimageIngredient> = ({ image, text, type }) => {\r\n    const styleText = {\r\n            zIndex: 100\r\n    } as const;\r\n\r\n    return (\r\n        <div className={bStyles.imageContainer} style={type === \"row\" ? { marginRight: \"-16px\" } : {}}>\r\n            <div\r\n                className={!!text ? bStyles.cardImageBlur : bStyles.cardImage}\r\n                style={{ backgroundImage: \"url(\" + image + \")\" }}\r\n            >\r\n                {!!text &&\r\n                    <span className=\"text text_type_digits-default\" style={styleText}>\r\n                        {text}\r\n                    </span>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const BurgerPrice: FC<{total:number}> = ({ total }) =>\r\n    <div className={bStyles.cardTotal}>\r\n        <span className=\"text text_type_digits-default mr-2\">{total}</span>\r\n        <CurrencyIcon type={\"primary\"}/>\r\n    </div>;\r\n\r\nexport const BurgerNumber: FC<{ number: number }> = ({ number }) =>\r\n    <p className=\"text text_type_digits-default\">\r\n        #{number}\r\n    </p>;","import { FC } from \"react\";\r\nimport { TfeedBurger } from '../../utils/proptypes';\r\nimport fStyles from './feed-burgers.module.css';\r\nimport { ScrollBox } from '../scrollbox/scrollbox';\r\nimport { BurgerCard } from '../burger-card/burger-card';\r\n\r\nexport const FeedBurgers: FC<TfeedBurger> = ({ title, burgers }) => {\r\n    \r\n    return (\r\n        <article className={fStyles.burgers}>\r\n            {!!title && <h1 className={\"text text_type_main-large mb-3 mt-10\"}>{title}</h1>}\r\n            <ScrollBox\r\n                bottom={16}\r\n                id={\"feed\"}\r\n            >\r\n                <div>\r\n                    {burgers.map(burger =>\r\n                        <BurgerCard key={burger._id} burger={burger} />)}\r\n                </div>\r\n            </ScrollBox>\r\n        </article>\r\n    )\r\n}\r\n","import React, { FC, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport pStyles from './profile.module.css';\r\nimport { Switch, NavLink, Route, Redirect, useRouteMatch} from 'react-router-dom';\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { logoutUser } from \"../../services/slicers/profile/profile\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FeedBurgers } from \"../../components/feed-burgers/feed-burgers\";\r\nimport { BurgerOrderPage } from \"..\";\r\nimport { onChangeInput, updateUserProfile } from \"../../services/slicers/profile/profile\";\r\nimport { Loader } from \"../../components/loader/loader\";\r\nimport { ErrorMessage } from \"../../components/error-message/error-message\";\r\nimport { NoOrdersPage } from \"..\";\r\n\r\n\r\nexport const ProfilePage: FC = () => {\r\n    const { path } = useRouteMatch();\r\n\r\n    return (\r\n        <div className={pStyles.profile}>\r\n            <ProfileMenu />\r\n            <Switch>\r\n                <Route path={`${path}`} exact><ProfileForm /></Route>\r\n                <Route path={`${path}/orders`} exact><ProfileOrders /></Route>\r\n\r\n                <Route path={`${path}/orders/:id`} exact>\r\n                    <BurgerOrderPage type={\"profile\"} />\r\n                </Route>\r\n                <Route><Redirect to={`${path}`} /></Route>\r\n            </Switch>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ProfileMenu: FC = () => {\r\n    const { url } = useRouteMatch();\r\n    const dispatch = useDispatch();\r\n\r\n    const classLink = `text text_type_main-medium ${pStyles.link}`;\r\n    const classActiveLink = `text text_type_main-medium ${pStyles.activeLink}`;\r\n\r\n    return (\r\n        <div className={pStyles.menu}>\r\n            <NavLink exact to={`${url}`} className={classLink} activeClassName={classActiveLink}>Профиль</NavLink>\r\n            <NavLink to={`${url}/orders`} className={classLink} activeClassName={classActiveLink}>История заказов</NavLink>\r\n            <span className={classLink} onClick={() => dispatch(logoutUser())}>Выход</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ProfileForm: FC = () => {\r\n    const form = useSelector(store => store.profile.form);\r\n    const dispatch = useDispatch();\r\n\r\n    const changeProfile = (event: React.FormEvent) => {\r\n        event.preventDefault();\r\n        dispatch(updateUserProfile(form.inputs))\r\n    }\r\n\r\n    return (\r\n        <form className={pStyles.form} onSubmit={(event) => changeProfile(event)} id=\"profileForm\">\r\n            <Input\r\n                type={\"text\"}\r\n                value={form.inputs.name}\r\n                placeholder={\"Имя\"}\r\n                icon={\"EditIcon\"}\r\n                onChange={(event) => dispatch(onChangeInput({ key: \"name\", value: event.target.value }))}\r\n            />\r\n            <Input\r\n                type={\"email\"}\r\n                value={form.inputs.email}\r\n                placeholder={\"E-mail\"}\r\n                icon={\"EditIcon\"}\r\n                onChange={(event) => dispatch(onChangeInput({ key: \"email\", value: event.target.value }))}\r\n            />\r\n            <Input\r\n                type={\"password\"}\r\n                value={form.inputs.password}\r\n                placeholder={\"Пароль\"}\r\n                icon={\"EditIcon\"}\r\n                onChange={(event) => dispatch(onChangeInput({ key: \"password\", value: event.target.value }))}\r\n            />\r\n            <div className={pStyles.formSubmit}>\r\n                <Button>\r\n                    Сохранить\r\n                </Button>\r\n            </div>\r\n        </form>\r\n\r\n    )\r\n}\r\n\r\nconst ProfileOrders: FC = () => {\r\n    const { orders, success, isError } = useSelector(store => store.wsOrders);\r\n    const isLoadedFoods = useSelector(store => store.foods.isLoaded);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (isLoadedFoods && !success) {\r\n            dispatch({ type: \"wsOrders/wsInit\" });\r\n        }\r\n    }, [isLoadedFoods, success, dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch({ type: \"wsOrders/wsClosed\" });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {(!!orders && success)\r\n                ? (!!orders.length ? <FeedBurgers burgers={orders} /> : <NoOrdersPage />)\r\n                : <Loader text={\"Уточняем на кухне\"} />}\r\n            {isError && <ErrorMessage />}\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState, FC } from 'react';\r\nimport fStyles from './feed-status.module.css';\r\nimport { useSelector } from '../../services/types/hooks-types';\r\nimport { TfeedStatusArrs, IstatusColumns, IstatusCount } from '../../utils/proptypes';\r\n\r\nexport const FeedStatus: FC = () => {\r\n    const { orders, total, totalToday } = useSelector(store => store.wsFeed);\r\n    const [state, setState] = useState<TfeedStatusArrs>({\r\n        arrDone: [],\r\n        arrNotReady: []\r\n    });\r\n\r\n    useEffect(() => {\r\n\r\n        if (!!orders && orders.length) {\r\n            setState({\r\n                arrDone: (orders.filter(b => b.status === \"done\")).map(b => b.number),\r\n                arrNotReady: (orders.filter(b => b.status !== \"done\")).map(b => b.number),\r\n            })\r\n        }\r\n\r\n    }, [orders]);\r\n\r\n    return (\r\n        <article className={fStyles.status}>\r\n            <div className={fStyles.data}>\r\n                <StatusColumns title=\"Готовы:\" arr={state.arrDone} type=\"primary\"></StatusColumns>\r\n                <StatusColumns title=\"В работе:\" arr={state.arrNotReady} type=\"secondary\"></StatusColumns>\r\n            </div>\r\n            <div className={fStyles.total}>\r\n                <StatusCount title=\"Выполнено за всё время:\" count={total} />\r\n                <StatusCount title=\"Выполнено за сегодня:\" count={totalToday} />\r\n            </div>\r\n        </article>\r\n    )\r\n}\r\n\r\nconst StatusColumns:FC<IstatusColumns> = React.memo(\r\n    ({ arr, title, type }) =>\r\n        <div className={fStyles.columns}>\r\n            <h3 className=\"text text_type_main-medium mb-6\">{title}</h3>\r\n            <div className={fStyles.digits}>\r\n                {arr.map((item, i) =>\r\n                    i < 30 &&\r\n                    <p key={i}\r\n                        className=\"text text_type_digits-default\" style={{ color: \"var(--text-\" + type + \"-color)\" }}>\r\n                        {item}\r\n                    </p>\r\n                )}\r\n            </div>\r\n        </div>\r\n);\r\n\r\nconst StatusCount:FC<IstatusCount> = React.memo(\r\n    ({ title, count }) => {\r\n        let formatter = new Intl.NumberFormat(\"ru\");\r\n        return (\r\n            <div className={fStyles.count}>\r\n                <h3 className=\"text text_type_main-medium\">{title}</h3>\r\n                <p className={`text text_type_digits-large ${fStyles.totalDigits}`}>{formatter.format(count + 0)}</p>\r\n            </div>\r\n        )\r\n    }\r\n)","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"../../services/types/hooks-types\";\r\nimport pStyles from '../pages.module.css';\r\nimport { ErrorMessage } from '../../components/error-message/error-message';\r\nimport { Loader } from '../../components/loader/loader';\r\nimport { FeedBurgers } from '../../components/feed-burgers/feed-burgers';\r\nimport { FeedStatus } from '../../components/feed-status/feed-status';\r\n\r\nexport const FeedPage = () => {\r\n    const { orders, success, isError } = useSelector(store => store.wsFeed);\r\n    const isLoadedFoods = useSelector(store => store.foods.isLoaded)\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (isLoadedFoods && !success) {\r\n            dispatch({ type: \"wsFeed/wsInit\" });\r\n        }\r\n    }, [isLoadedFoods, success, dispatch]);\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch({ type: \"wsFeed/wsClosed\" });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {(!!orders && success)\r\n                ? <div className={pStyles.content}>\r\n                    <FeedBurgers burgers={orders} title={\"Лента заказов\"} />\r\n                    <FeedStatus />\r\n                  </div >\r\n                : <Loader text={\"Уточняем на кухне\"} />\r\n            }\r\n            {isError && <ErrorMessage />}\r\n        </>\r\n    )\r\n}","\r\nimport React, { FC } from 'react';\r\nimport oStyles from './burger-order.module.css';\r\nimport { BurgerNumber, BurgerPrice, BurgerTime, BurgerIngredientImage } from \"../burger-card/burger-card\";\r\nimport { ScrollBox } from '../scrollbox/scrollbox';\r\nimport { TorderProps, TorderRecipeProps, TorderIngredientProps } from '../../utils/proptypes';\r\n\r\n\r\nexport const BurgerOrder: FC<TorderProps> = ({ order }) => {\r\n\r\n    const { name, number, _id, status, ingredients, createdAt, total } = order;\r\n\r\n    return (\r\n        <div className={oStyles.order}>\r\n            <div className={oStyles.header}>\r\n                <BurgerNumber number={number} />\r\n            </div>\r\n\r\n            <h1 className=\"text text_type_main-medium\">{name}</h1>\r\n\r\n            <span className=\"text text_type_main-default mt-3 mb-10\" style={{ color: \"var(--text-success-color\" }}>\r\n                {status === \"done\" ? \"Выполнен\" : \"Готовится\"}\r\n            </span>\r\n\r\n            <BurgerOrderRecipe ingredients={ingredients} />\r\n\r\n            <div className={oStyles.footer}>\r\n                <BurgerTime time={createdAt} />\r\n                <BurgerPrice total={total} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst BurgerOrderRecipe: FC<TorderRecipeProps> = ({ ingredients }) => {\r\n    return (\r\n        <div className={oStyles.recipe}>\r\n            <h3 className=\"text text_type_main-medium mb-6 mt-5\">Состав</h3>\r\n            <ScrollBox id={\"recipe\"}>\r\n                <div className={oStyles.ingredients}>\r\n                    {ingredients.map((ingredient, i) =>\r\n                        <OrderIngredient key={ingredient._id + i} ingredient={ingredient} />\r\n                    )}\r\n                </div>\r\n            </ScrollBox>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst OrderIngredient: FC<TorderIngredientProps> = ({ ingredient }) => {\r\n    const total: number = ingredient.type === \"bun\" ? 2 : 1 * ingredient.price;\r\n    return (\r\n        <div className={oStyles.ingredient}>\r\n            <div className={oStyles.about}>\r\n                <BurgerIngredientImage image={ingredient.image} />\r\n                <p className=\"text text_type_main-default ml-4\">{ingredient.name}</p>\r\n            </div>\r\n            <BurgerPrice total={total} />\r\n        </div>\r\n\r\n    )\r\n}","import React, { useState, useEffect, FC } from \"react\";\r\nimport pStyles from '../pages.module.css';\r\nimport { ErrorMessage } from '../../components/error-message/error-message';\r\nimport { useDispatch, useSelector } from '../../services/types/hooks-types';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { BurgerOrder } from \"../../components/burger-order/burger-order\";\r\nimport { Modal } from '../../components/modal/modal';\r\nimport { Loader } from '../../components/loader/loader';\r\nimport { NoOrderPage } from \"..\";\r\n\r\n\r\nexport const BurgerOrderModal: FC = () => {\r\n    const order = useSelector(store => store.burgerOrder);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const closeModal = () => {\r\n        dispatch({ type: \"burgerOrder/closeOrder\" });\r\n        history.goBack();\r\n    }\r\n\r\n    return (\r\n        <div style={{ position: \"fixed\", overflow: \"hidden\" }}>\r\n            {order.show &&\r\n                <Modal\r\n                    onClose={closeModal}\r\n                    children={<BurgerOrder order={order.item!} />}\r\n                />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const BurgerOrderPage: FC<{type: \"feed\" | \"profile\"}> = ({ type }) => {\r\n\r\n    const { id } = useParams<{ id: string }>();\r\n    const { orders, success, isError } = useSelector(store => store.wsFeed);\r\n    // const feedOrders = useSelector(store => store.wsFeed.orders);\r\n    const profileOrders = useSelector(store => store.wsOrders.orders);\r\n    const isLoadedFoods = useSelector(store => store.foods.isLoaded)\r\n    const dispatch = useDispatch();\r\n\r\n    const [state, setState] = useState({\r\n        order: null,\r\n        isLoading: true\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (isLoadedFoods && !success) {\r\n            dispatch({ type: \"wsFeed/wsInit\" })\r\n        }\r\n    }, [isLoadedFoods, success, dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch({ type: \"wsFeed/wsClosed\" })\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!!orders && type === \"feed\") {\r\n            setState({\r\n                order: orders.find(order => order._id === id),\r\n                isLoading: false\r\n            })\r\n        }\r\n        if (!!profileOrders && type === \"profile\") {\r\n            setState({\r\n                order: profileOrders.find(order => order._id === id),\r\n                isLoading: false\r\n            })\r\n        }\r\n    }, [orders, profileOrders, id, type]);\r\n\r\n    const { order, isLoading } = state;\r\n    return (\r\n        <div className={pStyles.modalPage}>\r\n            {!isLoading &&\r\n                <>\r\n                    {!order\r\n                        ? <NoOrderPage />\r\n                        : <BurgerOrder order={order} />\r\n                    }\r\n                </>\r\n            }\r\n            {isLoading && <Loader text={\"Проверяем заказ\"} />}\r\n            {isError && <ErrorMessage />}\r\n        </div>\r\n    )\r\n}","import { useEffect, FC } from 'react';\r\nimport { useDispatch } from '../../services/types/hooks-types';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\nimport styles from './app.module.css';\r\n\r\nimport { ProtectedRoute } from '../protected-route/protected-route';\r\nimport { AppHeader } from '../app-header/app-header';\r\nimport { getFoods } from '../../services/slicers/foods/foods';\r\nimport {\r\n  BurgerConstructorPage,\r\n  LoginPage, RegisterPage, ForgotPassPage, ResetPassPage,\r\n  NoPage, IngredientPage, IngredientPageModal, ProfilePage,\r\n  FeedPage, BurgerOrderPage, BurgerOrderModal\r\n} from '../../pages';\r\n\r\nimport { getUserProfile } from '../../services/slicers/profile/profile';\r\nimport { IlocationState } from '../../utils/proptypes';\r\n\r\nexport const App: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  let location = useLocation<IlocationState>();\r\n\r\n  useEffect(() => {\r\n    dispatch(getFoods());\r\n    dispatch(getUserProfile());\r\n  }, []);\r\n\r\n  let background = (location.state && history.action.toLowerCase() === \"push\")\r\n    && location.state.background;\r\n\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n      <main className={styles.main}>\r\n\r\n        <Switch location={background || location}>\r\n\r\n          <ProtectedRoute path='/profile'>\r\n            <ProfilePage />\r\n          </ProtectedRoute>\r\n\r\n          <Route path='/' exact>\r\n            <BurgerConstructorPage />\r\n          </Route>\r\n\r\n          <Route path='/login' exact>\r\n            <LoginPage />\r\n          </Route>\r\n\r\n          <Route path='/register' exact>\r\n            <RegisterPage />\r\n          </Route>\r\n\r\n          <Route path='/forgot-password' exact>\r\n            <ForgotPassPage />\r\n          </Route>\r\n\r\n          <Route path='/reset-password' exact>\r\n            <ResetPassPage />\r\n          </Route>\r\n\r\n          <Route path='/feed' exact>\r\n            <FeedPage />\r\n          </Route>\r\n\r\n          <Route path='/feed/:id' exact>\r\n            <BurgerOrderPage type={\"feed\"} />\r\n          </Route>\r\n\r\n          <Route path='/ingredients/:id' exact>\r\n            <IngredientPage />\r\n          </Route>\r\n\r\n          <Route>\r\n            <NoPage />\r\n          </Route>\r\n        </Switch>\r\n\r\n        {background &&\r\n          <>\r\n            <Route path='/ingredients/:id' exact>\r\n              <IngredientPageModal />\r\n            </Route>\r\n\r\n            <Route path='/feed/:id' exact>\r\n              <BurgerOrderModal />\r\n            </Route>\r\n\r\n            <ProtectedRoute path='/profile/orders/:id' exact>\r\n              <BurgerOrderModal />\r\n            </ProtectedRoute>\r\n          </>\r\n        }\r\n      </main >\r\n    </>\r\n  )\r\n};\r\n\r\n","import { Component, ErrorInfo, ReactNode } from \"react\";\r\nimport { ErrorMessage } from '../error-message/error-message';\r\n\r\ninterface Props {\r\n    children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n    hasError: boolean;\r\n}\r\n\r\nexport default class ErrorBoundary extends Component<Props, State> {\r\n    public state: State = {\r\n        hasError: false\r\n    };\r\n\r\n    public static getDerivedStateFromError(_: Error): State {\r\n        return { hasError: true };\r\n    }\r\n\r\n    public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n        console.log('Cath error', error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.hasError\r\n                ? <ErrorMessage />\r\n                : this.props.children\r\n        )\r\n    }\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { TIngredientState } from './ingredient-types';\r\n\r\nconst initialIngredient: TIngredientState = {\r\n    show: false,\r\n    item: null\r\n};\r\n\r\nconst ingredietnSlice = createSlice({\r\n    name: 'ingredient',\r\n    initialState: initialIngredient,\r\n    reducers: {\r\n        openIngredient: (state, action) => {\r\n            state.show = true;\r\n            state.item = action.payload    \r\n        },\r\n        closeIngredient: (state) => {\r\n            state.show = false;\r\n            state.item= null\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer } = ingredietnSlice;\r\nconst { openIngredient, closeIngredient } = actions;\r\n\r\nexport {\r\n    reducer as ingredientReducer,\r\n    openIngredient, closeIngredient,\r\n    initialIngredient\r\n}","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { THeaderState } from './header-types';\r\nimport { TheaderLink } from '../../../utils/proptypes';\r\n\r\nconst initialHeader: THeaderState = {\r\n    burger: { type: \"secondary\", icon: \"burger\", text: \"Конструктор\", link: \"/\" },\r\n    orders: { type: \"secondary\", icon: \"list\", text: \"Лента заказов\", link: \"/feed\" },\r\n    profile: { type: \"secondary\", icon: \"profile\", text: \"Личный кабинет\", link: \"/profile\" }\r\n}\r\n\r\nexport const headerSlice = createSlice({\r\n    name: 'header',\r\n    initialState: initialHeader,\r\n    reducers: {\r\n        onChangeLink: (state, action: PayloadAction<TheaderLink>) => {\r\n            for (const key in state) {\r\n                state[key as keyof THeaderState] = key === action.payload\r\n                    ? { ...state[key as keyof THeaderState], type: \"primary\" }\r\n                    : { ...state[key as keyof THeaderState], type: \"secondary\" }\r\n            };\r\n        }\r\n    },\r\n});\r\n\r\n\r\nconst { actions, reducer } = headerSlice;\r\nconst { onChangeLink } = actions;\r\n\r\nexport { reducer as headerReducer, onChangeLink, initialHeader };\r\n","import { createSlice, PayloadAction  } from '@reduxjs/toolkit';\r\nimport { TAuthFormState } from './auth-form-types';\r\nimport { Tinput, Tinputs, Idata } from '../../../utils/proptypes';\r\n\r\nexport const initialAuth: TAuthFormState = {\r\n    arrInputs: [],\r\n    data: {} //all values of form       \r\n};\r\n\r\nexport const authSlice = createSlice({\r\n    name: \"auth\",\r\n    initialState: initialAuth,\r\n    reducers: {\r\n        setInputs: (state, action: PayloadAction<Tinputs>) => {\r\n            const inputs = action.payload;\r\n\r\n            state.arrInputs = inputs.map(input => ({\r\n                ...input,\r\n                icon: input.type === \"password\" ? \"HideIcon\" : input.icon,\r\n                valid: false,\r\n                error: \"\"\r\n            }))\r\n        },\r\n        clearForm: (state) => initialAuth,\r\n        handleInput: (state, action: PayloadAction<Tinput>) => {\r\n            const { name, value } = action.payload;\r\n            state.data = { ...state.data, [name]: value }\r\n            state.arrInputs = state.arrInputs.map(input => input.name === name ? { ...input, value } : input);\r\n\r\n        },\r\n        handleIcon: (state, action: PayloadAction<Tinput>) => {\r\n            const input = action.payload;\r\n            if (input.name === \"password\") {\r\n                state.arrInputs = state.arrInputs.map(inputState =>\r\n                    input.name === inputState.name\r\n                        ? {\r\n                            ...input,\r\n                            type: input.type === \"password\" ? \"text\" : \"password\",\r\n                            icon: input.type === \"password\" ? \"ShowIcon\" : \"HideIcon\"\r\n                        }\r\n                        : inputState);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nconst { reducer, actions } = authSlice;\r\nconst { setInputs, clearForm, handleInput, handleIcon  } = actions;\r\nexport {\r\n    reducer as authFormReducer,\r\n    setInputs, clearForm, handleInput, handleIcon\r\n};","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { TBurgerOrderState } from './burger-order-types';\r\n\r\nconst initialBurgerOrder: TBurgerOrderState = {\r\n    show: false,\r\n    item: null\r\n};\r\n\r\nconst burgerOrderSlice = createSlice({\r\n    name: 'burgerOrder',\r\n    initialState: initialBurgerOrder,\r\n    reducers: {\r\n        openOrder: (state, action) => {\r\n            state.show = true;\r\n            state.item = action.payload\r\n        },\r\n        closeOrder: (state) => {\r\n            state.show = false;\r\n            state.item = null\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer } = burgerOrderSlice;\r\nconst { openOrder, closeOrder } = actions;\r\n\r\nexport {\r\n    reducer as burgerOrderReducer,\r\n    openOrder, closeOrder,\r\n    initialBurgerOrder\r\n}\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { TFeedWsState, TFeedWsPayload } from './ws-feed-types';\r\nimport {getFullOrders} from '../../../utils/helpers';\r\n\r\nconst initialFeedWs: TFeedWsState = {\r\n    success: false,\r\n    isError: false,\r\n    orders: null,\r\n    total: 0,\r\n    totalToday: 0\r\n};;\r\n\r\nconst profileSlice = createSlice({\r\n    name: 'wsFeed',\r\n    initialState: initialFeedWs,\r\n    reducers: {\r\n        wsError: (state) => {\r\n            state.success = false;\r\n            state.isError = true\r\n        },\r\n        wsSuccess: (state, action) => {\r\n            state.success = true\r\n        },\r\n        wsClosed: (state, action) => {\r\n            state.success = false\r\n        },\r\n        wsGetFeed: (state, action: PayloadAction<TFeedWsPayload>) => {\r\n            const { parsedData, foods } = action.payload;\r\n            state.success = true;\r\n            state.orders = getFullOrders(parsedData.orders!, foods);\r\n            state.total = parsedData.total;\r\n            state.totalToday = parsedData.totalToday;            \r\n        }\r\n    }\r\n})\r\n\r\n\r\nconst { reducer, actions } = profileSlice;\r\nconst { wsError, wsSuccess, wsClosed, wsGetFeed } = actions;\r\n\r\nexport {\r\n    reducer as wsFeedReducer,\r\n    wsError, wsSuccess, wsClosed, wsGetFeed,\r\n    initialFeedWs\r\n}","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { TOrdersWsState, TOrdersWsPayload } from './ws-orders-types';\r\nimport { getFullOrders } from '../../../utils/helpers';\r\n\r\nconst initialOrdersWs: TOrdersWsState = {\r\n    success: false,\r\n    isError: false,\r\n    orders: null\r\n};\r\n\r\nconst profileSlice = createSlice({\r\n    name: 'wsOrders',\r\n    initialState: initialOrdersWs,\r\n    reducers: {\r\n        wsError: (state) => {\r\n            state.success = false;\r\n            state.isError = true\r\n        },\r\n        wsSuccess: (state, action) => {\r\n            state.success = true\r\n        },\r\n        wsClosed: (state, action) => {\r\n            state.success = false\r\n        },\r\n\r\n        wsGetOrders: (state, action: PayloadAction<TOrdersWsPayload>) => {\r\n            const { parsedData, foods } = action.payload;\r\n            state.success = true;\r\n            state.orders = getFullOrders(parsedData.orders!, foods);\r\n        }\r\n    }\r\n})\r\n\r\nconst { reducer, actions } = profileSlice;\r\nconst { wsError, wsSuccess, wsClosed, wsGetOrders } = actions;\r\n\r\nexport {\r\n    reducer as wsOrdersReducer,\r\n    wsError, wsSuccess, wsClosed, wsGetOrders,\r\n    initialOrdersWs\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport { foodsReducer } from './slicers/foods/foods';\r\nimport { burgerReducer } from \"./slicers/burger-constructor/burger-constructor\";\r\nimport { ordersReducer } from \"./slicers/orders/orders\";\r\nimport { ingredientReducer } from \"./slicers/ingredient/ingredient\";\r\nimport { headerReducer } from \"./slicers/header/header\";\r\nimport { profileReducer } from \"./slicers/profile/profile\";\r\nimport { authFormReducer } from \"./slicers/auth-form/auth-form\";\r\nimport { burgerOrderReducer } from \"./slicers/burger-order/burger-order\";\r\nimport { wsFeedReducer } from \"./slicers/ws-feed/ws-feed\";\r\nimport { wsOrdersReducer } from \"./slicers/ws-orders/ws-orders\";\r\n\r\nimport { headerSlice } from \"./slicers/header/header\";\r\nimport { authSlice } from \"./slicers/auth-form/auth-form\";\r\nimport {profileSlice} from './slicers/profile/profile';\r\n\r\nexport const rootReducer = combineReducers({\r\n    foods: foodsReducer,\r\n    burger: burgerReducer,\r\n    orders: ordersReducer,\r\n    ingredient: ingredientReducer,\r\n    header: headerReducer,\r\n    profile: profileReducer,\r\n    authForm: authFormReducer,\r\n    burgerOrder: burgerOrderReducer,\r\n    wsFeed: wsFeedReducer,\r\n    wsOrders: wsOrdersReducer\r\n});\r\n\r\n\r\nexport const allActions = {\r\n    ...headerSlice.actions,\r\n    ...authSlice.actions,\r\n    ...profileSlice.actions, \r\n};","import type { Middleware, MiddlewareAPI } from 'redux';\r\nimport type { TActions, AppDispatch, RootState } from '../types/store-types';\r\nimport type { Torder, Tburger, TwsActions } from '../../utils/proptypes';\r\nimport { getCookie } from '../../utils/helpers';\r\n\r\nexport const socketMiddleware = (wsUrl: string, wsActions: TwsActions, isToken: Boolean): Middleware => {\r\n\r\n    return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n        let socket: WebSocket | null = null;\r\n\r\n        return next => (action: TActions) => {\r\n            const { dispatch, getState } = store;\r\n            const { type } = action;\r\n            const { wsInit, onOpen, onClose, onError, onMessage } = wsActions;\r\n\r\n            const foods = getState().foods.items;\r\n\r\n            if (type === wsInit) {\r\n                socket = new WebSocket(isToken ? wsUrl + '?token=' + getCookie('accessToken') : wsUrl);\r\n            }\r\n            if (socket) {\r\n                socket.onopen = event => {\r\n                    dispatch({ type: onOpen });\r\n                };\r\n\r\n                socket.onerror = event => {\r\n                    dispatch({ type: onError });\r\n                };\r\n\r\n                socket.onmessage = event => {\r\n                    const { data } = event;\r\n                    const parsedData = JSON.parse(data);\r\n\r\n                    dispatch({\r\n                        type: onMessage,\r\n                        payload: {\r\n                            parsedData: parsedData,\r\n                            foods: foods\r\n                        }\r\n                    });\r\n                }\r\n\r\n                socket.onclose = event => {\r\n                    dispatch({ type: onClose });\r\n                };\r\n            }\r\n\r\n            next(action);\r\n        };\r\n    }) as Middleware;\r\n};\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { App } from './components/app/app';\r\nimport ErrorBoundary from './components/error-boundary/error-boundary';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport logger from 'redux-logger';\r\nimport { rootReducer } from './services/index';\r\n\r\nimport { socketMiddleware } from './services/middleware/socketMidlware';\r\n\r\nconst wsUrlFeed = 'wss://norma.nomoreparties.space/orders/all';\r\n\r\nconst wsActionsFeed = {\r\n  wsInit: \"wsFeed/wsInit\",\r\n  onOpen: \"wsFeed/wsSuccess\",\r\n  onClose: \"wsFeed/wsClosed\",\r\n  onError: \"wsFeed/wsError\",\r\n  onMessage: \"wsFeed/wsGetFeed\"\r\n};\r\n\r\nconst wsUrlOrders = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nconst wsActionsOrders = {\r\n  wsInit: \"wsOrders/wsInit\",\r\n  onOpen: \"wsOrders/wsSuccess\",\r\n  onClose: \"wsOrders/wsClosed\",\r\n  onError: \"wsOrders/wsError\",\r\n  onMessage: \"wsOrders/wsGetOrders\"\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware()\r\n      .concat(\r\n        logger,\r\n        socketMiddleware(wsUrlFeed, wsActionsFeed, false),\r\n        socketMiddleware(wsUrlOrders, wsActionsOrders, true)\r\n      ),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ErrorBoundary>\r\n      <Provider store={store}>\r\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n          <App />\r\n        </BrowserRouter>\r\n      </Provider>\r\n    </ErrorBoundary>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"pages_content__TpO_W\",\"noPage\":\"pages_noPage__3xkgD\",\"noOrderPage\":\"pages_noOrderPage__1hNU3 pages_noPage__3xkgD\",\"modalPage\":\"pages_modalPage__UE8PE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-constructor_main__2tNbw\",\"menu\":\"burger-constructor_menu__sONAg\",\"dropContainer\":\"burger-constructor_dropContainer__Zjt8T\",\"filling\":\"burger-constructor_filling__2fgAv\",\"confirm\":\"burger-constructor_confirm__3NS70\",\"orderPrice\":\"burger-constructor_orderPrice__3AlD8\",\"recipe\":\"burger-constructor_recipe__3vUgp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burger-card_card__30_sB\",\"cardHeader\":\"burger-card_cardHeader__3AvS1\",\"cardFooter\":\"burger-card_cardFooter__2BWi2\",\"cardTotal\":\"burger-card_cardTotal__3jUzz\",\"cardImages\":\"burger-card_cardImages__3QA7Q\",\"imageContainer\":\"burger-card_imageContainer__294ZG\",\"cardImage\":\"burger-card_cardImage__3suQg\",\"cardImageBlur\":\"burger-card_cardImageBlur__1wimx burger-card_cardImage__3suQg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredients-details_container__3uS5N\",\"composition\":\"ingredients-details_composition__wYmpZ\",\"composeItem\":\"ingredients-details_composeItem__1EVnk\",\"image\":\"ingredients-details_image__3YRQs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"feed-status_status__2TSop\",\"data\":\"feed-status_data__Yyewg\",\"columns\":\"feed-status_columns__3cz0E\",\"digits\":\"feed-status_digits__1YHIi\",\"total\":\"feed-status_total__3M4sv\",\"totalDigits\":\"feed-status_totalDigits__F2CQl\",\"count\":\"feed-status_count__CWVfR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"burger-order_order__2SHCu\",\"header\":\"burger-order_header__2tORc\",\"footer\":\"burger-order_footer__3r0Bd\",\"ingredients\":\"burger-order_ingredients__33wNb\",\"ingredient\":\"burger-order_ingredient__192n2\",\"about\":\"burger-order_about__2zK1n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1gtX5\",\"content\":\"app-header_content__2DMzM\",\"logo\":\"app-header_logo__2c-Yf\",\"button-primary\":\"app-header_button-primary__3XgOa\",\"button-secondary\":\"app-header_button-secondary__c8MyV app-header_button-primary__3XgOa\",\"menu\":\"app-header_menu__2BfqR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__1oY-K\",\"footer\":\"form_footer__2aMqx\",\"footerBlock\":\"form_footerBlock__1LJTT\",\"footerDesc\":\"form_footerDesc__P6E6e\",\"footerLink\":\"form_footerLink__1QOpS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile___ZBKq\",\"menu\":\"profile_menu__2zVJs\",\"link\":\"profile_link__3eJaJ\",\"activeLink\":\"profile_activeLink__1jnOS profile_link__3eJaJ\",\"form\":\"profile_form__1oUU8\",\"input_size_default\":\"profile_input_size_default__2VsF4\",\"formSubmit\":\"profile_formSubmit__3F252\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-details_container__39iZT\",\"icon\":\"order-details_icon__SQgvY\",\"title\":\"order-details_title__37gWW\",\"titleLoader\":\"order-details_titleLoader__36HNX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"scrollbox_container__2Bl4W\",\"scrollBarContainer\":\"scrollbox_scrollBarContainer__25fZX\",\"content\":\"scrollbox_content__2y-GP\",\"scrollbar\":\"scrollbox_scrollbar__3ORoV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalBox\":\"modal_modalBox__KI4un\",\"closePosition\":\"modal_closePosition__1sEwP\",\"content\":\"modal_content__3O20I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"loader_container__1MVDK\",\"icons\":\"loader_icons__3768C\",\"rotateIcons\":\"loader_rotateIcons__2q2CU\",\"icon\":\"loader_icon__1H6Wd\",\"rotateIcon\":\"loader_rotateIcon__1sb08\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"error-message_container__1xeVZ\",\"icons\":\"error-message_icons__3GgcV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3xsct\"};"],"sourceRoot":""}